<!DOCTYPE html>
<html lang="zh">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>
      
    macOS 存储空间越来越少, 删完不增加可用空间 - doge1024
    
    </title>
    <link rel="shortcut icon" href="/Users/lzhmini/Library/Mobile Documents/com~apple~CloudDocs/Gridea2/favicon.ico" type="image/png" />

    
    
    <link href="atom.xml" rel="alternate" title="doge1024" type="application/atom+xml">
    <link rel="stylesheet" href="asset/css/style.min.css">
    <link rel="stylesheet" href="asset/css/doc.css">
    <script src="asset/app.js"></script>
</head>
  <body>
    <section class="hero">
      <div class="hero-head">
          <nav class="navbar" role="navigation" aria-label="main navigation">
              <div class="container">
              <div class="navbar-brand">
                
                <a target="self" class="navbar-item " href="index.html">Home</a>
                
                <a target="_self" class="navbar-item " href="archives.html">Archives</a>
                

                <a role="button" id="navbarSNSRssSwitchBtn" class="navbar-burger burger" aria-label="menu" aria-expanded="false" data-target="navbarSNSRssButtons">
                  <span aria-hidden="true"></span>
                  <span aria-hidden="true"></span>
                  <span aria-hidden="true"></span>
                </a>
              </div>
            
              <div id="navbarSNSRssButtons" class="navbar-menu">
                <div class="navbar-start">
                  
                </div>
            
                <div class="navbar-end">
                  <div class="navbar-item">
                    <!--buttons start-->
                    <div class="buttons">
                      
                        
                        
                        
                        
                      
                      <a href="atom.xml" target="_blank" title="RSS">
                          <span class="icon is-large has-text-black-bis">
                              <svg class="svg-inline--fa fa-rss fa-w-14 fa-lg" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="rss" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" data-fa-i2svg=""><path fill="currentColor" d="M128.081 415.959c0 35.369-28.672 64.041-64.041 64.041S0 451.328 0 415.959s28.672-64.041 64.041-64.041 64.04 28.673 64.04 64.041zm175.66 47.25c-8.354-154.6-132.185-278.587-286.95-286.95C7.656 175.765 0 183.105 0 192.253v48.069c0 8.415 6.49 15.472 14.887 16.018 111.832 7.284 201.473 96.702 208.772 208.772.547 8.397 7.604 14.887 16.018 14.887h48.069c9.149.001 16.489-7.655 15.995-16.79zm144.249.288C439.596 229.677 251.465 40.445 16.503 32.01 7.473 31.686 0 38.981 0 48.016v48.068c0 8.625 6.835 15.645 15.453 15.999 191.179 7.839 344.627 161.316 352.465 352.465.353 8.618 7.373 15.453 15.999 15.453h48.068c9.034-.001 16.329-7.474 16.005-16.504z"></path></svg><!-- <i class="fas fa-rss fa-lg"></i> -->
                          </span>
                      </a>
                    </div>
                    <!--buttons end-->

                  </div>
                </div>
                </div>
              </div>
            </nav>
      </div>

 <div class="hero-body ct-body"></div>
      
    </section>
    <section class="ct-body">
      <div class="container">
          <div class="columns is-variable bd-klmn-columns is-4 is-centered">
              <div class="column is-four-fifths">
                  <div class="post-body single-content">
                    
                    <h1 class="title">
                            macOS 存储空间越来越少, 删完不增加可用空间   
                      </h1>
                     
                    
                      <div class="media">
                            
                            <figure class="media-left">
                              <p class="image is-48x48">
                                
                                  <img class="is-rounded" src="">
                                
                              </p>
                            </figure>
                            
                            <div class="media-content">
                              <div class="content">
                                <p>
                                 <span class="date">2019/06/20</span>
                                  
                                         
                                  

                                   
                                      
                                  <br />
                                  <span class="tran-tags">Tags:</span>&nbsp;
                                     

                                </p>
                              </div>
                            </div>
                         
                    </div>
                </div>
                  <article class="markdown-body single-content">
                    <h2 id="toc_0">问题</h2>

<p><code># macOS Catalina 10.15 beta 1 #</code> <br/>
升级 macOS Catalina 10.15 beta 1 后发现存储空间越来越少，怎么删除文件都不管用。文件越删越多。</p>

<h2 id="toc_1">原因</h2>

<p>因为 Time Machin 的 <code>local snapshots</code>(本地快照功能)，在你打开自动备份，但是没有接入任何硬盘的时候，系统会从本地创建并存储快照。<br/>
按道理来说此项功能很好，可以帮一些没有或者忘记带硬盘的人自动备份，而且对用户来说应该是不占用存储空间的。<br/>
<strong>但是</strong> 显然新系统出现了bug，导致了存储空间不能得到及时释放的情况。</p>

<p>从苹果官网的解释是：</p>

<blockquote>
<p>### How local snapshots use storage space<br/>
You don&#39;t need to think about how much storage space local snapshots are using, because they don&#39;t use space needed for tasks like downloading files, copying files, or installing new software.</p>

<p>Your Mac counts the space used by snapshots as available storage. Even so, Time Machine stores snapshots only on disks that have plenty of free space, and it automatically deletes snapshots as they age or as space is needed for other things.</p>
</blockquote>

<p>google 翻译：</p>

<blockquote>
<h3 id="toc_2">本地快照如何使用存储空间</h3>

<p>您无需考虑本地快照正在使用多少存储空间，因为它们不会使用下载文件，复制文件或安装新软件等任务所需的空间。</p>

<p>您的Mac将快照使用的空间计为可用存储空间。即便如此，Time Machine仅将快照存储在具有足够可用空间的磁盘上，并且在它们老化或其他内容需要空间时自动删除快照。搜索</p>
</blockquote>

<p>可以google自己搜索关键字 <a href="https://www.google.com/search?newwindow=1&amp;rlz=1C5CHFA_enUS691US691&amp;ei=xyMLXcTkHMqU-gSQrZ2YDw&amp;q=About+Time+Machine+local+snapshots&amp;oq=About+Time+Machine+local+snapshots&amp;gs_l=psy-ab.3...0.0..231404...0.0..0.0.0.......0......gws-wiz.kx7n-Vqtt_M">About Time Machine local snapshots</a>，苹果官网的<a href="https://support.apple.com/en-us/HT204015">文章</a>已经删除，可以通过网页快照查看。</p>

<h2 id="toc_3">解决方案：</h2>

<h5 id="toc_4">如果你的电脑已经剩余空间太少，导致开不开机，请使用 Time Machine ，进行恢复。以下解决方案仅适用可开机用户</h5>

<ul>
<li><h6 id="toc_5">小白大神皆可使用：</h6>
<ol>
<li> 从菜单栏中的 Time Machine 菜单打开 Time Machine 偏好设置  。或者选择 Apple菜单&gt;系统偏好设置，然后单击 Time Machine。</li>
<li> 取消选择“自动备份”或单击“关闭/打开”开关，具体取决于您在 Time Machine 偏好设置中看到的内容。</li>
<li> 等待几分钟以允许删除本地快照。然后再次打开 Time Machine 。它会记的使用您的备份磁盘。</li>
<li><em>此方案未经本人验证，我使用的是下面的方法</em></li>
</ol></li>
<li><h6 id="toc_6">使用终端命令：</h6>
<ol>
<li>使用 tmutil 命令， <code>tmutil listlocalsnapshotdates</code> 列出所以本地快照</li>
<li>使用 <code>tmutil deletelocalsnapshots xxx</code> 删除对应快照</li>
<li>删除了三个快照后，本地剩余空间从 2G 升为 77G</li>
<li>可选 <code>sudo tmutil disable localsnapshots</code> 从终端关闭本地快照备份功能，和手动关闭 “自动备份” 功能效果一样</li>
</ol></li>
</ul>

<p><img src="https://raw.githubusercontent.com/doge1024/doge1024.github.io/saveImage/image/20210605143443.png" alt="20210605143443" class="mw_img_center" style="width:600px;display: block; clear:both; margin: 0 auto;"/></p>

                  </article>
                  <div class="comments-wrap">
                    <div class="share-comments">
                      

                      

                      
                    </div>
                  </div><!-- end comments wrap -->
              </div>
            </div><!-- end columns -->
      </div><!-- end container -->
    </section>



    <footer class="footer">
        <div class="content has-text-centered">
          <p>
              Copyright &copy; 2019
              Powered by <a target="_blank" href="http://www.mweb.im">MWeb</a>,&nbsp; 
              Theme used <a target="_blank" href="https://bulma.io/">Bulma CSS</a>.
          </p>
        </div>
      </footer>



  















  
    




  </body>
</html>
