<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
    
  doge1024
  
  </title>
  
  
  <link href="atom.xml" rel="alternate" title="doge1024" type="application/atom+xml">
    <link rel="stylesheet" href="asset/css/foundation.min.css" />
    <link rel="stylesheet" href="asset/css/docs.css" />
    <script src="asset/js/vendor/modernizr.js"></script>
    <script src="asset/js/vendor/jquery.js"></script>
 
<script type="text/javascript">
  function before_search(){
    var searchVal = 'site: ' + document.getElementById('search_input').value;
    document.getElementById('search_q').value = searchVal;
    return true;
  }
</script>
  </head>
  <body class="antialiased hide-extras">
    
    <div class="marketing off-canvas-wrap" data-offcanvas>
      <div class="inner-wrap">


<nav class="top-bar docs-bar hide-for-small" data-topbar>


  <section class="top-bar-section">
  <div class="row">
      <div style="position: relative;width:100%;"><div style="position: absolute; width:100%;">
        <ul id="main-menu" class="left">
        
        <li id=""><a target="self" href="index.html">Home</a></li>
        
        <li id=""><a target="_self" href="archives.html">Archives</a></li>
        
        </ul>

        <ul class="right" id="search-wrap">
          <li>
<form target="_blank" onsubmit="return before_search();" action="https://google.com/search" method="get">
    <input type="hidden" id="search_q" name="q" value="" />
    <input tabindex="1" type="search" id="search_input"  placeholder="Search"/>
</form>
</li>
          </ul>
      </div></div>
  </div>
  </section>

</nav>

        <nav class="tab-bar show-for-small">
  <a href="javascript:void(0)" class="left-off-canvas-toggle menu-icon">
    <span> &nbsp; doge1024</span>
  </a>
</nav>

<aside class="left-off-canvas-menu">
      <ul class="off-canvas-list">
        
        <li><a target="self" href="index.html">Home</a></li>
        
        <li><a target="_self" href="archives.html">Archives</a></li>
        

    <li><label>Categories</label></li>

         

      </ul>
    </aside>

<a class="exit-off-canvas" href="#"></a>


        <section id="main-content" role="main" class="scroll-container">
        
       

 <script type="text/javascript">
	$(function(){
		$('#menu_item_index').addClass('is_active');
	});
</script>
<div class="row">
	<div class="large-8 medium-8 columns">
		<div class="markdown-body home-categories">
		
			<div class="article">
                <a class="clearlink" href="2017-05-14%2023%3A37%3A45.html">
                
                  <h1>ReactNativeå…¥å‘: iOSåŸç”Ÿé¡¹ç›®é›†æˆReactNavite(äºŒ)</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<h2 id="toc_0">** åˆ›å»ºä¸€ä¸ªç®€å•çš„ReactNative ç¨‹åº **</h2>

<p>ä½¿ç”¨ä¸‹é¢ä¸‰ä¸ªå‘½ä»¤å¯ä»¥åˆ›å»ºä¸€ä¸ªç®€å•çš„ReactNativeç¨‹åºï¼Œå¹¶åœ¨iOSæ¨¡æ‹Ÿå™¨ä¸Šè¿è¡Œ ï¼ˆæ— è®ºæ˜¯è¿è¡Œåœ¨å®‰å“è¿˜æ˜¯iOSæ¨¡æ‹Ÿå™¨ä¸Šï¼Œéƒ½éœ€è¦åœ¨å¼€å¯æ¨¡æ‹Ÿå™¨çš„æƒ…å†µä¸‹è¿è¡Œç¨‹åºï¼‰</p>

<pre><code class="language-text">react-native init AwesomeProject
cd AwesomeProject
react-native run-ios
</code></pre>

<h2 id="toc_1">** é‚£ä¹ˆå¦‚ä½•å°†ReactNativeçš„ç•Œé¢åµŒå…¥åˆ°iOSç¨‹åºä¸­é‚£ï¼Ÿ**</h2>

<ol>
<li>é¦–å…ˆå°†æ–°åˆ›å»ºçš„ AwesomeProject ç¨‹åºç›®å½•ä¸‹çš„ <code>package.json</code> å’Œ <code>index.ios.js</code> æ–‡ä»¶æ‹·è´è‡ªå·±çš„åŸç”Ÿç¨‹åºç›®å½•ä¸‹é¢ (è‡ªå·±æ–°å»ºç›®å½•ç»Ÿä¸€æ”¾ç½®ä¹Ÿå¯ä»¥)</li>
<li>åœ¨å‘½ä»¤è¡Œ åˆ‡æ¢åˆ° <code>package.json</code> æ‰€åœ¨çš„ç›®å½•ï¼Œå¹¶æ‰§è¡Œ
<code>sudo npm install</code> è¾“å…¥å¯†ç åå›è½¦ï¼Œç­‰å¾…æ‰§è¡ŒæˆåŠŸ</li>
<li>åœ¨Podfileä¸­åŠ å…¥
<code>
pod &#39;Yoga&#39;,  :path =&gt; &#39;./node_modules/react-native/ReactCommon/yoga&#39;<br/>
pod &#39;React&#39;, :path =&gt; &#39;./node_modules/react-native&#39;, :subspecs =&gt; [<br/>
    &#39;Core&#39;,<br/>
    &#39;BatchedBridge&#39;,<br/>
    &#39;DevSupport&#39;,<br/>
    &#39;ART&#39;,<br/>
    &#39;RCTActionSheet&#39;,<br/>
    &#39;RCTAnimation&#39;,<br/>
    &#39;RCTImage&#39;,<br/>
    &#39;RCTNetwork&#39;,<br/>
    &#39;RCTText&#39;,<br/>
    &#39;RCTWebSocket&#39;,<br/>
    &#39;RCTLinkingIOS&#39;,<br/>
]<br/>
# è¿™æ˜¯ä¸€ä»½åŸºç¡€çš„æ·»åŠ åº“åˆ—è¡¨ï¼Œå…¶ä»–å¦‚æœ‰éœ€è¦ç»§ç»­æ·»åŠ 
</code></li>
<li>æ‰§è¡Œ <code>pod update --verbose</code> ç­‰å¾…æ›´æ–°æˆåŠŸ</li>
</ol>

<p>å¥½çš„ï¼Œå·²ç»å°†å…³äºRNçš„å‡†å¤‡å·¥ä½œåšå®Œäº†ï¼Œä¸‹é¢è¿˜è¦å¯¹åŸç”Ÿç¨‹åºè¿›è¡Œä¸€ç‚¹å°æ”¹é€ ï¼š</p>

<ul>
<li>a. è®¾ç½®ç¨‹åºInfo.plistæ–‡ä»¶ä¸­çš„ <code>App Transport Security Settings</code> <br/>
ç¡®ä¿httpåè®®å¯ä»¥æ­£å¸¸é€šä¿¡
<img src="http://upload-images.jianshu.io/upload_images/1300265-09a352975da308d5.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1024" alt="Paste_Image.png"/></li>
<li>b. åœ¨ç¨‹åºä¸­æ·»åŠ ï¼š</li>
</ul>

<pre><code class="language-text">    // ----------ç¬¬ä¸€ç§æ–¹å¼----------
    #import &lt;React/RCTRootView.h&gt;
    NSString * strUrl = @&quot;http://localhost:8081/index.ios.bundle?platform=ios&quot;;
    NSURL * jsCodeLocation = [NSURL URLWithString:strUrl];
    
    RCTRootView * rootView = [[RCTRootView alloc] initWithBundleURL:jsCodeLocation
                                                         moduleName:@&quot;AwesomeProject&quot;
                                                  initialProperties:nil
                                                      launchOptions:nil];
    rootView.frame = self.view.bounds;
    [self.view addSubview:rootView];
    
    // ----------ç¬¬äºŒç§æ–¹å¼----------
    #import &lt;React/RCTRootView.h&gt;
    #import &lt;React/RCTBundleURLProvider.h&gt;
    [[RCTBundleURLProvider sharedSettings] setEnableDev:YES];
    NSURL *jsCodeLocation = [[RCTBundleURLProvider sharedSettings] jsBundleURLForBundleRoot:@&quot;index.ios&quot; fallbackResource:nil];
    RCTRootView *rootView = [[RCTRootView alloc] initWithBundleURL:jsCodeLocation
                                                        moduleName:@&quot;AwesomeProject&quot;
                                                 initialProperties:nil
                                                     launchOptions:nil];
    rootView.frame = self.view.bounds;
    [self.view addSubview:rootView];
</code></pre>

<ul>
<li><p>c.  è¿è¡ŒPackagerï¼š<br/>
è·³è½¬åˆ°åŒ…å«<code>node_module</code>ç›®å½•çš„æ–‡ä»¶å¤¹ï¼Œè¿è¡Œ<br/>
<code>npm start</code> or <code>react-native start</code> ï¼ˆä¸¤ä¸ªå‘½ä»¤éƒ½å¯ä»¥ï¼‰<br/>
å‘½ä»¤è¡Œå‡ºç° ï¼š** <code>Loading dependency graph, done.</code>** å³è¡¨ç¤ºæœ¬åœ°æœåŠ¡å·²æˆåŠŸå¼€å¯</p>
<blockquote>
<p>1) å¦‚æœå¿˜è®°è¿™ä¸€æ­¥ä¼šå‡ºç°ï¼šCould not connect to development server<br/>
2) å¦‚æœå‡ºç° <code>Packager can&#39;t listen on port 8081</code><br/>
<code>Most likely another process is already using this port</code> æˆ–ç«¯å£è¢«å ç”¨ä¹‹ç±»çš„ï¼Œå¤šåŠæ˜¯å…¶ä»–å‘½ä»¤çª—å£å·²ç»StartæœåŠ¡äº†ï¼Œæ£€æŸ¥ä¸‹ï¼Œæ‰¾åˆ°å <code>control + C</code> å…³é—­å®ƒ<br/>
3) æ­¤æç¤ºæ˜¯åŸºäºä»¥ä¸‹ç‰ˆæœ¬ï¼Œå¦‚æœç‰ˆæœ¬ä¸åŒå¯èƒ½ä¼šæç¤ºä¸ä¸€æ ·<br/>
<code>react-native-cli: 2.0.1</code><br/>
<code>react-native: 0.42.3</code></p>
</blockquote></li>
<li><p>d. åœ¨Xcode <code>com</code>+<code>R</code> è¿è¡Œé¡¹ç›®    </p>
<blockquote>
<p>è¯·ç¡®ä¿** cocoapodsç‰ˆæœ¬åœ¨1.2.0ä»¥ä¸Š ** å¦åˆ™å¯èƒ½ä¼šå‡ºç° æ‰¾ä¸åˆ°å¤´æ–‡ä»¶ çš„é”™è¯¯<br/>
æŸ¥çœ‹cocoapodsç‰ˆæœ¬ï¼Œåœ¨å‘½ä»¤è¡Œæ‰§è¡Œ <code>pod --version</code> </p>
</blockquote></li>
</ul>

<hr/>

<h2 id="toc_2">** iOSæ‰“åŒ…React Nativeèµ„æº **</h2>

<p>åœ¨æ­£å¼æµ‹è¯•æ‰“åŒ…çš„æ—¶å€™ï¼Œå°±éœ€è¦å°†RNçš„èµ„æºè¿›è¡Œæ‰“åŒ…æˆç¦»çº¿èµ„æºï¼Œæ”¾åˆ°é¡¹ç›®ä¸­ï¼Œä½¿é¡¹ç›®åœ¨å…¶ä»–æœºå™¨ä¸Šä¹Ÿèƒ½æ­£å¸¸è¿è¡Œ<br/>
React Nativeçš„ <code>react-native bundle</code> å‘½ä»¤æ˜¯ç”¨æ¥è¿›è¡Œæ‰“åŒ…çš„å‘½ä»¤ï¼Œ<br/>
å…¶ä¸­æˆ‘ä»¬å¸¸ä½¿ç”¨çš„ä¸€äº›å‘½ä»¤é€‰é¡¹ï¼š</p>

<ul>
<li>--entry-file ,iosæˆ–è€…androidå…¥å£çš„jsåç§°ï¼Œæ¯”å¦‚<code>index.ios.js</code></li>
<li>--platform ,å¹³å°åç§°(iosæˆ–è€…android)</li>
<li>--dev ,è®¾ç½®ä¸ºfalseçš„æ—¶å€™å°†ä¼šå¯¹JavaScriptä»£ç è¿›è¡Œä¼˜åŒ–å¤„ç†ã€‚</li>
<li>--bundle-output, ç”Ÿæˆçš„jsbundleæ–‡ä»¶çš„åç§°ï¼Œæ¯”å¦‚<code>./ios/bundle/index.ios.jsbundle</code></li>
<li>--assets-dest å›¾ç‰‡ä»¥åŠå…¶ä»–èµ„æºå­˜æ”¾çš„ç›®å½•,æ¯”å¦‚<code>./react-native/image</code><br/></li>
</ul>

<p>** æ‰“åŒ…çš„å‘½ä»¤ï¼š**<br/>
<code><br/>
react-native bundle --entry-file index.ios.js --platform ios --dev false --bundle-output ./bundles/index.ios.jsbundle --assets-dest ./bundles<br/>
</code><br/>
** æ­£å¼æ‰“åŒ…æ—¶å€™çš„ä»£ç ï¼š**</p>

<pre><code class="language-text">    NSURL * jsCodeLocation = [[NSBundle mainBundle] URLForResource:@&quot;index.ios&quot; withExtension:@&quot;jsbundle&quot;];
    
    RCTRootView * rootView = [[RCTRootView alloc] initWithBundleURL:jsCodeLocation
                                                         moduleName:@&quot;RNInit&quot;
                                                  initialProperties:nil
                                                      launchOptions:nil];
</code></pre>
<br>
<h2 id="toc_3">** iOSçœŸæœºè¿è¡ŒReact Native **</h2>

<p>å°†åˆšæ‰æ‰“åŒ…ç”Ÿæˆçš„bundlesçš„æ–‡ä»¶å¤¹ï¼Œæ‹–å…¥iOS å·¥ç¨‹ï¼Œæ”¾åˆ°ä¸»å·¥ç¨‹ä¸‹é¢</p>

<p><img src="http://upload-images.jianshu.io/upload_images/1300265-9e3d2bbb8388cb83.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/620" alt="image.png"/></p>

<p>iOSä¸­å¯¼å…¥bundleçš„è·¯å¾„éœ€è¦æ”¹ä¸€ä¸‹</p>

<pre><code class="language-text">    // #import &lt;React/RCTRootView.h&gt;
    // #import &lt;React/RCTBundleURLProvider.h&gt;
    NSURL *jsCodeLocation = [[NSBundle mainBundle] URLForResource:@&quot;index.ios&quot; withExtension:@&quot;jsbundle&quot; subdirectory:@&quot;bundles&quot;];
    RCTRootView *rootView = [[RCTRootView alloc] initWithBundleURL:jsCodeLocation
                                                        moduleName:@&quot;AwesomeProject&quot;
                                                 initialProperties:nil
                                                     launchOptions:nil];
    rootView.frame = self.view.bounds;
    [self.view addSubview:rootView];
</code></pre>

<p>index.ios.js ä¸­çš„ä»£ç ä¹Ÿéœ€è¦æ”¹ä¸€ä¸‹ï¼Œæ‰èƒ½å°†å›¾ç‰‡çš„è·¯å¾„æå¯¹ï¼Œä¸ç„¶ä¼šå‡ºç°æœ¬åœ°å›¾ç‰‡ä¸æ˜¾ç¤ºçš„é—®é¢˜</p>

<pre><code class="language-text">import { AppRegistry } from &#39;react-native&#39;;
import App from &#39;./js/yourapp&#39;;
import { Platform } from &#39;react-native&#39;;
import { setCustomSourceTransformer } from &#39;react-native/Libraries/Image/resolveAssetSource&#39;;

// æ›´æ”¹ä¸€ä¸‹å›¾ç‰‡çš„æŸ¥æ‰¾æ–¹æ³•ï¼Œä»¥ä¾¿åœ¨çœŸæœºèƒ½æ­£ç¡®æŸ¥æ‰¾è·¯å¾„
setCustomSourceTransformer(function (resolver) {
    if (Platform.OS === &#39;ios&#39;
        &amp;&amp; !resolver.serverUrl
        &amp;&amp; !resolver.bundlePath
        &amp;&amp; resolver.asset.type === &#39;png&#39;) {
        resolver.bundlePath = &#39;bundles/&#39;;
    }
    return resolver.defaultAsset();
});

AppRegistry.registerComponent(&#39;test&#39;, () =&gt; App);
</code></pre>
<br>
<h2 id="toc_4">** iOSçœŸæœºå®æ—¶è°ƒè¯•React Native **</h2>

<p>åœ¨è°ƒè¯•çš„æ—¶å€™ï¼Œæˆ‘æ¯”è¾ƒä¹ æƒ¯ä½¿ç”¨çœŸæœºè¿è¡ŒæŸ¥çœ‹ï¼Œä»‹ç»ä¸‹å¦‚ä½•åœ¨çœŸæœºè°ƒè¯•React Nativeï¼š</p>

<blockquote>
<p>åœ¨é¡¹ç›®ä¸­åŠ å…¥ä¸€ä¸ªåå­—ä¸ºip.txtçš„æ–‡ä»¶ï¼Œå°†è‡ªå·±ç”µè„‘çš„ipåœ°å€å†™å…¥æ–‡ä»¶ï¼Œå ç”¨1è¡Œï¼Œè®°å¾—åŠ å…¥targetä¸­<br/>
å‰©ä¸‹çš„å’Œä½¿ç”¨æ¨¡æ‹Ÿå™¨ä¸€æ ·çš„æ­¥éª¤å¯åŠ¨ï¼Œnpm start<br/>
æ­£å¸¸è¿è¡Œé¡¹ç›®ï¼Œå³å¯<br/>
<br></p>
</blockquote>

<hr/>

<h3 id="toc_5">** å°†ReactNative åµŒå…¥iOS ä¸­æ—¶ï¼Œä¼šç¢°åˆ°ä¸€äº›é—®é¢˜ **</h3>

<h5 id="toc_6">1. ä¸çŸ¥é“éœ€è¦Podé‡Œçš„Reactçš„subspecså¡«å“ªäº›ï¼Ÿ</h5>

<p>å¯ä»¥å»æ‰“å¼€ <code>./node_modules/react-native/React.podspec</code> è¿™ä¸ªæ–‡ä»¶é‡Œé¢æœ‰Reactçš„subspecs çš„å…¨éƒ¨å£°æ˜</p>

<h5 id="toc_7">2. æ›´æ–°pod å‡ºç° Yoga ä¾èµ–é”™è¯¯</h5>

<p>ç±»ä¼¼äºè¿™ç§ <code>Yoga (= 0.42.3.React) required by React/Core (0.42.3)</code>  </p>

<p>è¯¦ç»†é”™è¯¯ï¼š</p>

<pre><code class="language-text">[!] Unable to satisfy the following requirements:

- `Yoga (= 0.42.3.React)` required by `React/Core (0.42.3)`

None of your spec sources contain a spec satisfying the dependency: `Yoga (= 0.42.3.React)`.

You have either:
 * out-of-date source repos which you can update with `pod repo update`.
 * mistyped the name or version.
 * not added the source repo that hosts the Podspec to your Podfile.

Note: as of CocoaPods 1.0, `pod repo update` does not happen on `pod install` by default.
</code></pre>

<p>è§£å†³æ–¹æ³•ï¼š<br/>
åœ¨Podfileæ–‡ä»¶åŠ ä¸Š<br/>
<code>pod &#39;Yoga&#39;,  :path =&gt; &#39;./node_modules/react-native/ReactCommon/yoga&#39;</code><br/>
è·¯å¾„ä¸­çš„<code>./node_modules</code>éœ€è¦æ›¿æ¢ä¸ºè‡ªå·±é¡¹ç›®ä¸­çš„<code>node_modules</code>ç›®å½•è·¯å¾„</p>

<h4 id="toc_8">3. è¿è¡Œç¨‹åºå‡ºç° Native module cannot be null</h4>

<p>ç¬¬ä¸€æ¬¡å°†RNåµŒå…¥åˆ°iOSä¸­åï¼Œè¿è¡Œç¨‹åºå‡ºç° Native module cannot be null</p>

<p><img src="http://upload-images.jianshu.io/upload_images/1300265-c6977233a0001a4e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/320" alt="Paste_Image.png"/></p>

<p>è§£å†³æ–¹æ³•ï¼š<br/>
å‡ºç°ä¸Šè¿°é”™è¯¯ï¼Œæ˜¯å› ä¸ºå°‘å¼•å…¥äº†ä¸€ä¸ªéƒ¨ä»¶ <code>RCTNetwork</code> ï¼Œå°† <code>RCTNetwork</code> åŠ å…¥åˆ° <code>React</code> çš„ <code>subspecs</code> ä¸­ã€‚<br/><br/>
ä»¥ä¸‹æ˜¯ä¸‰ä¸ªåŸºç¡€éƒ¨ä»¶ï¼Œå¦‚æœéœ€è¦å…¶ä»– <code>subspecs</code> è‡ªå·±ç»§ç»­å¾€ä¸‹åŠ å°±å¥½äº†</p>

<pre><code class="language-text">pod &#39;React&#39;, :path =&gt; &#39;./node_modules/react-native&#39;, :subspecs =&gt; [
        &#39;Core&#39;,
        &#39;BatchedBridge&#39;,
        &#39;DevSupport&#39;,
        &#39;ART&#39;,
        &#39;RCTActionSheet&#39;,
        &#39;RCTAnimation&#39;,
        &#39;RCTImage&#39;,
        &#39;RCTNetwork&#39;,
        &#39;RCTText&#39;,
        &#39;RCTWebSocket&#39;,
        &#39;RCTLinkingIOS&#39;,
]
# è¿™æ˜¯ä¸€ä»½åŸºç¡€çš„æ·»åŠ åº“åˆ—è¡¨
</code></pre>

<p><a href="https://github.com/facebook/react-native/issues/8449"></a></p>

<h4 id="toc_9">4. ç¼–è¯‘å‡ºç° jschelpers/JavaScriptCore.h file not found â—ï¸</h4>

<p>ç¬¬ä¸€ä¸ªå¯èƒ½çš„é—®é¢˜ï¼šcocoapodsç‰ˆæœ¬ä½äº1.2.0ï¼Œå»ç½‘ä¸ŠæŸ¥æ‰¾å‡çº§cocoapodsçš„æ–¹æ³•è§£å†³<br/>
ç¬¬äºŒä¸ªå¯èƒ½çš„é—®é¢˜ï¼š0.45 ç‰ˆæœ¬ä»¥å Reactç¼ºå°‘ä¾èµ–ï¼Œæ›´æ–°Podfileè§£å†³</p>

<pre><code class="language-text">pod &#39;Yoga&#39;,  :path =&gt; &#39;../node_modules/react-native/ReactCommon/yoga&#39;
pod &#39;React&#39;, :path =&gt; &#39;../node_modules/react-native&#39;, :subspecs =&gt; [
         &#39;Core&#39;,
         &#39;BatchedBridge&#39;, # 0.45 ç‰ˆæœ¬ä»¥åéœ€è¦æ·»åŠ 
         &#39;RCTText&#39;,
         &#39;RCTWebSocket&#39;,
         &#39;RCTNetwork&#39;,
    ]
</code></pre>

<p>(çœŸçš„å‘å•Šã€‚ã€‚ã€‚)</p>

<h4 id="toc_10">5. å‡ºç° error: bundling: UnableToResolveError: Unable to resolve module <code>AccessibilityInfo</code></h4>

<p>è¯¦ç»†ä¿¡æ¯ï¼š</p>

<pre><code class="language-text">error: bundling: UnableToResolveError: Unable to resolve module `AccessibilityInfo` from `/Users/Test/Desktop/cardloan_react/node_modules/react-native/Libraries/react-native/react-native-implementation.js`: Module does not exist in the module map or in these directories:
  /Users/Test/Desktop/cardloan_react/node_modules/react-native/node_modules
,   /Users/Test/Desktop/cardloan_react/node_modules
</code></pre>

<p>è§£å†³åŠæ³•ï¼š<br/>
è°ƒç”¨<code>npm start -- --reset-cache</code> é‡æ–°å¼€å¯æœåŠ¡ï¼Œé‡æ–°è¿è¡Œè§£å†³<br/>
<br></p>

<h4 id="toc_11">6. å‡ºç° <code>Unhandled JS Exception: Cannot read property &#39;string&#39; of undefined</code></h4>

<p>æŠ¥é”™åˆ°ç³»ç»Ÿçš„jsæ–‡ä»¶ï¼š<br/>
Unhandled JS Exception: Cannot read property &#39;string&#39; of undefinedå°±æ˜¯æŠ¥é”™åˆ°ç³»ç»Ÿçš„ <code>React.PropTypes.string</code><br/>
é‡åˆ°è¿™ç§æƒ…å†µï¼Œä½ éœ€è¦åœ¨jsæ–‡ä»¶å¤¹ä¸‹æ‰§è¡Œä¸‹ <code>npm list</code> å¦‚æœè¿‡å‡ºç° <code>ERR</code> å°±è¡¨æ˜æ˜¯ä¾èµ–åº“é”™è¯¯ï¼Œéœ€è¦åˆ é™¤ <code>node_modules</code> é‡æ–° <code>install</code> ä¸€ä¸‹</p>
<br>
<p>** æ³¨æ„ **ï¼š æœ¬æ–‡æè¿°ä¸­å‡ºç°çš„ <code>./node_modules/react-native</code> è®°å¾—æ›¿æ¢æˆè‡ªå·±é¡¹ç›®ä¸­çš„ <code>node_modules</code> ç›®å½•çš„è·¯å¾„<br/>
** Tips **ï¼š<br/>
<code>./ ä¸ºå½“å‰æ–‡ä»¶æ‰€åœ¨çš„æ–‡ä»¶å¤¹</code><br/>
<code>../ ä¸ºå½“å‰æ–‡ä»¶æ‰€åœ¨çš„æ–‡ä»¶å¤¹çš„ä¸Šçº§æ–‡ä»¶å¤¹</code></p>

<blockquote>
<h6 id="toc_12">å…¶ä»–æ–‡ç« </h6>

<p><a href="http://www.jianshu.com/p/c8550af92886">ReactNativeå…¥å‘: ReactNativeå…¥é—¨(ä¸€)</a><br/>
<a href="http://www.jianshu.com/p/af0ac940a01d">ReactNativeå…¥å‘: iOSåŸç”Ÿé¡¹ç›®é›†æˆReactNavite(äºŒ)</a><br/>
<a href="http://www.jianshu.com/p/27342c26f827">ReactNativeå…¥å‘: react-navigationåº“(ä¸‰)</a><br/>
<a href="https://www.jianshu.com/p/ca199a7a0870">ReactNativeå…¥å‘: codepushçƒ­æ›´æ–°(å››)</a><br/>
<a href="https://www.jianshu.com/p/7d3bf876cbd0">ReactNativeå…¥å‘: ä¸€äº›å¸¸ç”¨æ§ä»¶çš„ä½¿ç”¨(äº”)</a></p>
</blockquote>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2017/05/14</span>
                    
          				   
                    

                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="2017-05-12%2014%3A50%3A30.html">
                
                  <h1>ReactNativeå…¥å‘: ReactNativeå…¥é—¨(ä¸€)</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<h3 id="toc_0">åˆè¯†React Native</h3>

<blockquote>
<p>React Native (ç®€ç§°RN)æ˜¯Facebookäº2015å¹´4æœˆå¼€æºçš„è·¨å¹³å°ç§»åŠ¨åº”ç”¨å¼€å‘æ¡†æ¶ï¼Œæ˜¯Facebookæ—©å…ˆå¼€æºçš„UIæ¡†æ¶ React åœ¨åŸç”Ÿç§»åŠ¨åº”ç”¨å¹³å°çš„è¡ç”Ÿäº§ç‰©ï¼Œç›®å‰æ”¯æŒiOSå’Œå®‰å“ä¸¤å¤§å¹³å°ã€‚RNä½¿ç”¨Javascriptè¯­è¨€ï¼Œç±»ä¼¼äºHTMLçš„JSXï¼Œä»¥åŠCSSæ¥å¼€å‘ç§»åŠ¨åº”ç”¨ï¼Œå› æ­¤ç†Ÿæ‚‰Webå‰ç«¯å¼€å‘çš„æŠ€æœ¯äººå‘˜åªéœ€å¾ˆå°‘çš„å­¦ä¹ å°±å¯ä»¥è¿›å…¥ç§»åŠ¨åº”ç”¨å¼€å‘é¢†åŸŸã€‚(ç™¾åº¦ç™¾ç§‘)</p>
</blockquote>

<p>ä½œä¸ºä¸€ä¸ªiOSå¼€å‘äººå‘˜çš„ä¸€äº›å°çœ‹æ³•ï¼š</p>

<ol>
<li><del>React Nativeçš„å­¦ä¹ è¿˜æ˜¯æœ‰ç‚¹éº»çƒ¦çš„ï¼Œéœ€è¦å…ˆå­¦ä¹ JSã€Htmlã€ES6è¯­æ³•ï¼Œç„¶åå¯ä»¥æ¥è§¦React Nativeçš„å¼€å‘äº†</del>
React Nativeçš„å­¦ä¹ è¿˜æ˜¯æœ‰ç‚¹éº»çƒ¦çš„ï¼Œéœ€è¦å…ˆå­¦ä¹ JSã€Htmlã€ES6è¯­æ³•ã€React ç„¶åå¯ä»¥æ¥è§¦React Nativeçš„å¼€å‘äº† (å½“ç„¶ç›´æ¥è·³è¿‡ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œåæ­£æœ€åè¿˜ä¼šå›æ¥æŸ¥ ğŸ˜‚)</li>
<li>å¦‚æœä½¿ç”¨React Nativeï¼Œä½œä¸ºä¸»åŠ›å¼€å‘å¯ä»¥å¼€å‘ä¸€äº›åŠ¨ç”»æ•ˆæœä¸å¤šï¼Œåˆ—è¡¨å±•ç¤ºä¸å¤šçš„Appã€‚æˆ–è€…å½“åšç»„ä»¶å¼€å‘ä¸€äº›ä¸¤ç«¯é€šç”¨çš„ç•Œé¢</li>
<li>JSå’ŒåŸç”Ÿçš„äº¤äº’æ˜¯å¼‚æ­¥çš„ï¼Œä¸€äº›äº¤äº’é€šä¿¡æ¯”è¾ƒéº»çƒ¦ï¼Œä¸€äº›ç»„ä»¶è”åŠ¨æ•ˆæœä¸å¥½å®ç°</li>
<li>React Nativeä»ç„¶ä¸å®Œå–„ï¼Œæ–‡æ¡£è¿˜ä¸å…¨ï¼Œè™½ç„¶Facebookæ¨çš„åŠ›åº¦ä¸å¤§ï¼Œä½†æ˜¯å›½å†…å¯¹è¿™å—éœ€æ±‚æ¯”è¾ƒé«˜ï¼Œå¯¹å‰æ™¯çœ‹å¥½</li>
</ol>

<h3 id="toc_1">å·¥æ¬²å–„å…¶äº‹ï¼Œå¿…å…ˆåˆ©å…¶å™¨</h3>

<h4 id="toc_2">å¼€å‘ç¯å¢ƒæ­å»º</h4>

<p>RNçš„ç‰ˆæœ¬å·®å¼‚è¾ƒå¤§ï¼Œä¸‹é¢çš„å·¥å…·åšå¥½å…¨éƒ¨å®‰è£…æœ€æ–°çš„ï¼Œå¦åˆ™æ–°æ—§ç‰ˆæœ¬ä¹‹é—´çš„é…åˆï¼Œå¯èƒ½å‡ºç°å§‹æ–™ä¸åŠçš„é—®é¢˜</p>

<h6 id="toc_3">å®‰è£…Node</h6>

<p>è¿è¡Œ<code>brew install node</code> ä½¿ç”¨Homebrewæ¥å®‰è£…<a href="https://nodejs.org/">Node.js</a> , å®‰è£…æœ€æ–°çš„å°±å¥½</p>

<p>å®‰è£…å®Œnodeåå»ºè®®è®¾ç½®npmé•œåƒä»¥åŠ é€Ÿåé¢çš„è¿‡ç¨‹ï¼ˆæˆ–ä½¿ç”¨ç§‘å­¦ä¸Šç½‘å·¥å…·ï¼‰ã€‚æ³¨æ„ï¼šä¸è¦ä½¿ç”¨cnpmï¼cnpmå®‰è£…çš„æ¨¡å—è·¯å¾„æ¯”è¾ƒå¥‡æ€ªï¼Œpackagerä¸èƒ½æ­£å¸¸è¯†åˆ«ï¼<br/>
 <code>npm config set registry https://registry.npm.taobao.org --global</code><br/>
<code>npm config set disturl https://npm.taobao.org/dist --global</code></p>

<h6 id="toc_4">Yarnã€React Nativeçš„å‘½ä»¤è¡Œå·¥å…·</h6>

<p><a href="http://yarnpkg.com/">Yarn</a>æ˜¯Facebookæä¾›çš„æ›¿ä»£npmçš„å·¥å…·ï¼Œå¯ä»¥åŠ é€Ÿnodeæ¨¡å—çš„ä¸‹è½½ã€‚React Nativeçš„å‘½ä»¤è¡Œå·¥å…·ç”¨äºæ‰§è¡Œåˆ›å»ºã€åˆå§‹åŒ–ã€æ›´æ–°é¡¹ç›®ã€è¿è¡Œæ‰“åŒ…æœåŠ¡ï¼ˆpackagerï¼‰ç­‰ä»»åŠ¡ã€‚<br/>
<code>npm install -g yarn react-native-cli</code></p>

<p>å®‰è£…å®ŒyarnååŒç†ä¹Ÿè¦è®¾ç½®é•œåƒæºï¼š<br/>
<code>yarn config set registry https://registry.npm.taobao.org --global</code><br/>
<code>yarn config set disturl https://npm.taobao.org/dist --global</code></p>

<h4 id="toc_5">å¼€å‘ReactNativeè‡ªç„¶éœ€è¦ç¼–è¾‘å™¨</h4>

<ol>
<li>###### Sublime Text 3
<del>åˆå§‹çš„ç»ƒä¹ ï¼Œæ¨èSublime Text 3ï¼Œå¤šæ•²ä¸‹ä»£ç ï¼Œç»ƒç»ƒæ‰‹</del>
é¦–å…ˆåœ¨Sublime Text å®‰è£… <a href="https://packagecontrol.io/installation">Package Control</a> ç„¶ååœ¨Package Control æœç´¢å®‰è£…æ’ä»¶<br/>
å»ºè®®å®‰è£…çš„æ’ä»¶:
<strong><a href="https://github.com/babel/babel-sublime">Babel</a></strong>ï¼šæä¾›JSXçš„ES6è¯­æ³•æ ¼å¼å’Œæç¤º 
<strong><a href="https://github.com/sergeche/emmet-sublime">Emmet</a></strong>ï¼šæä¾›CSSå’ŒHTMLçš„æç¤º
<strong><a href="https://github.com/Shrugs/react-native-snippets">react-native-snippets</a></strong>ï¼šæä¾›RNçš„ä»£ç ç‰‡æ®µ</li>
<li>###### WebStorm<br/>
å®é™…å¼€å‘çš„æ—¶å€™å¯ä»¥ä½¿ç”¨WebStorm ä»£ç ç¼–å†™è¿è¡Œéƒ½éå¸¸æ–¹ä¾¿ï¼Œ è°ƒè¯•å˜›ï¼Œä¸å¦‚atomæ–¹ä¾¿ <a href="https://www.jetbrains.com/webstorm/">WebStormä¸‹è½½</a><br/>
è¿™é‡Œæœ‰ä¸¤ç¯‡blogï¼Œè®²å¦‚ä½•è®¾ç½®WebStorm ä¾¿äºå¼€å‘ReactNative 
<a href="https://blog.jetbrains.com/webstorm/2016/12/developing-mobile-apps-with-react-native-in-webstorm/">Developing mobile apps with React Native in WebStorm</a>
<a href="https://blog.jetbrains.com/webstorm/2015/10/working-with-reactjs-in-webstorm-coding-assistance/">Working with ReactJS in WebStorm: Coding Assistance</a></li>
<li>###### Atom<br/>
Atomæ˜¯Facebookå®˜æ–¹æ¨èçš„å¼€å‘å·¥å…·, <a href="https://nuclide.io/docs/quick-start/getting-started/">æŒ‡å¯¼æ–‡ç« åœ¨è¿™é‡Œ</a>, Atomå¯ä»¥ç›´æ¥è°ƒè¯•RNçš„ä»£ç ï¼Œæ‰“æ–­ç‚¹Debugï¼Œè¿™ä¸€ç‚¹ä¸Šè¿˜æ˜¯æ¯”ä½¿ç”¨Chromeè°ƒè¯•æ–¹ä¾¿äº†å¾ˆå¤š<br/>
æˆ‘æœ€è¿‘å¼€å‘çš„è¯ä¹Ÿæ˜¯ä½¿ç”¨çš„Atom</li>
</ol>
<br>
<h6 id="toc_6">å…¶ä»–æ–‡ç« </h6>

<p><a href="http://www.jianshu.com/p/c8550af92886">ReactNativeå…¥å‘: ReactNativeå…¥é—¨(ä¸€)</a><br/>
<a href="http://www.jianshu.com/p/af0ac940a01d">ReactNativeå…¥å‘: iOSåŸç”Ÿé¡¹ç›®é›†æˆReactNavite(äºŒ)</a><br/>
<a href="http://www.jianshu.com/p/27342c26f827">ReactNativeå…¥å‘: react-navigationåº“(ä¸‰)</a><br/>
<a href="https://www.jianshu.com/p/ca199a7a0870">ReactNativeå…¥å‘: codepushçƒ­æ›´æ–°(å››)</a><br/>
<a href="https://www.jianshu.com/p/7d3bf876cbd0">ReactNativeå…¥å‘: ä¸€äº›å¸¸ç”¨æ§ä»¶çš„ä½¿ç”¨(äº”)</a></p>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2017/05/12</span>
                    
          				   
                    

                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="2017-05-04%2015%3A50%3A55.html">
                
                  <h1>iOSç»™å­—ç¬¦ä¸²æ·»åŠ åˆ é™¤çº¿ï¼Œä¸‹åˆ’çº¿æ•ˆæœ</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<p>æœ¬æ¥ä»¥ä¸ºæŒºç®€å•çš„æ•ˆæœï¼Œæ²¡æƒ³åˆ°å±…ç„¶æœ‰ç‚¹å°å‘ğŸ™„ï¼Œå†™ä¸‹æ¥è·Ÿå¤§å®¶åˆ†äº«ä¸‹</p>

<h3 id="toc_0">ç»™å­—ç¬¦ä¸²æ·»åŠ åˆ é™¤çº¿æ•ˆæœ</h3>

<h5 id="toc_1">1. ç»™å­—ç¬¦ä¸²&quot;123456&quot;æ·»åŠ åˆ é™¤çº¿æ•ˆæœ</h5>

<p>è®¾ç½®<code>@{NSStrikethroughStyleAttributeName : @(NSUnderlineStyleSingle)}</code></p>

<pre><code class="language-text">NSMutableAttributedString *attrStr = [[NSMutableAttributedString alloc] initWithString:@&quot;123456&quot;
                                                                            attributes:@{NSStrikethroughStyleAttributeName : @(NSUnderlineStyleSingle)}];
label.attributedText = attrStr;
</code></pre>

<p>åœ¨iOS 8.1ï¼Œ9.0ï¼Œ10.3ç³»ç»Ÿçš„æ¨¡æ‹Ÿå™¨ï¼Œå‘ˆç°å‡ºä¸€æ ·çš„æ•ˆæœï¼Œå¦‚ä¸‹ï¼š<br/>
<img src="http://upload-images.jianshu.io/upload_images/1300265-8901dcfdac4f08c7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/250" alt="iOS 8.1ï¼Œ9.0ï¼Œ10.3ç³»ç»Ÿçš„æ•ˆæœ"/></p>

<h5 id="toc_2">2. åªç»™å­—ç¬¦ä¸²æŸä¸€éƒ¨åˆ†æ·»åŠ åˆ é™¤çº¿</h5>

<p>å¦‚ï¼šå­—ç¬¦ä¸²&quot;123456&quot;ï¼Œåªç»™â€œ456â€æ·»åŠ åˆ é™¤çº¿</p>

<pre><code class="language-text">NSMutableAttributedString *attrStr = [[NSMutableAttributedString alloc] initWithString:@&quot;123456&quot;];
[attrStr setAttributes:@{NSStrikethroughStyleAttributeName : @(NSUnderlineStyleSingle)}
                 range:NSMakeRange(3, 3)];
label.attributedText = attrStr;
</code></pre>

<p>ç»§ç»­ä½¿ç”¨ä¸Šé¢çš„æ–¹æ³•å¾—åˆ°æ•ˆæœå¦‚ä¸‹ï¼š<br/>
åœ¨iOS 8.1ï¼Œ10.3ç³»ç»Ÿçš„æ¨¡æ‹Ÿå™¨æ•ˆæœï¼ˆNSStrikethroughStyleAttributeNameåœ¨iOS 10.3ã€8.1ä¸ç®¡ç”¨ï¼‰ï¼š</p>

<p><img src="http://upload-images.jianshu.io/upload_images/1300265-113b7e8fc6a5185a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/250" alt="iOS 8.1ï¼Œ10.3ç³»ç»Ÿçš„æ•ˆæœ"/><br/>
åœ¨iOS 9.0ç³»ç»Ÿçš„æ¨¡æ‹Ÿå™¨æ•ˆæœï¼š<br/>
<img src="http://upload-images.jianshu.io/upload_images/1300265-92f1a59cfb4a5930.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/250" alt="iOS 9.0ç³»ç»Ÿçš„æ•ˆæœ"/></p>

<h5 id="toc_3">é—®é¢˜å‡ºç°äº†ï¼Œå¦‚ä½•åœ¨8.0å’Œ10.0çš„ç³»ç»Ÿé‡Œé¢ä½¿æ–¹æ³•ç”Ÿæ•ˆï¼Ÿ</h5>

<p><img src="http://upload-images.jianshu.io/upload_images/1300265-c4c95675be05c339.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/155" alt="è¡¨æƒ….jpg"/><br/>
ä¸æ‡‚å°±è¦æŸ¥å–½ï¼Œç»è¿‡æœç´¢ä»¥åï¼Œæ‰¾åˆ°äº†æœ€ç®€å•æ–¹ä¾¿çš„è§£å†³åŠæ³•ï¼š</p>

<blockquote>
<p>åœ¨iOS 8 éœ€è¦é¢å¤–ç»™å…¶ä»–å­—ç¬¦ä¸²è®¾ç½®<code>@{NSStrikethroughStyleAttributeName : @(NSUnderlineStyleNone)}</code>ï¼Œæ‰èƒ½æ­£å¸¸æ˜¾ç¤º<br/>
åœ¨iOS 10  éœ€è¦é¢å¤–ç»™å…¶ä»–å­—ç¬¦ä¸²è®¾ç½®<code>@{NSBaselineOffsetAttributeName : @0}</code>ï¼Œæ‰èƒ½æ­£å¸¸æ˜¾ç¤º</p>

<ul>
<li>æ³¨ï¼š@(NSUnderlineStyleNone) å’Œ @0å‡æ˜¯é»˜è®¤å€¼</li>
</ul>
</blockquote>

<p>ä¸¤è€…ç»¼åˆä¸€ä¸‹ï¼Œ<br/>
ä»£ç ï¼š</p>

<pre><code class="language-text">NSMutableAttributedString *attrStr = [[NSMutableAttributedString alloc] initWithString:@&quot;123456&quot;
                                                                                attributes:@{NSStrikethroughStyleAttributeName : @(NSUnderlineStyleNone)}];
[attrStr setAttributes:@{NSStrikethroughStyleAttributeName : @(NSUnderlineStyleSingle),
                             NSBaselineOffsetAttributeName : @0}
                     range:NSMakeRange(3, 3)];
label.attributedText = attrStr;
</code></pre>

<p>æ•ˆæœï¼š</p>

<p><img src="http://upload-images.jianshu.io/upload_images/1300265-11fd094f0d170432.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/310" alt="QQ20170504-140132@2x.png"/><br/>
åœ¨ iOS 8.1ã€9.0 å’Œ iOS 10.3å‡èƒ½æ­£å¸¸æ˜¾ç¤ºï¼Œä½¿ç”¨å…¶ä»–æ–¹æ³•ä¹Ÿå¯ä»¥,ä½†æ˜¯è¦ä¿è¯ä¸Šé¢çš„å±æ€§è®¾ç½®ä¸Š</p>

<h3 id="toc_4">ç»™å­—ç¬¦ä¸²æ·»åŠ ä¸‹åˆ’çº¿æ•ˆæœ</h3>

<h5 id="toc_5">1. ç»™å­—ç¬¦ä¸²&quot;123456&quot;æ·»åŠ ä¸‹åˆ’çº¿æ•ˆæœ</h5>

<p>è®¾ç½®<code>@{NSUnderlineStyleAttributeName : @(NSUnderlineStyleSingle)}</code></p>

<pre><code class="language-text">NSMutableAttributedString *attrStr = [[NSMutableAttributedString alloc] initWithString:@&quot;123456&quot;
                                                                                attributes:@{NSUnderlineStyleAttributeName : @(NSUnderlineStyleSingle)}];
label.attributedText = attrStr;
</code></pre>

<p>åœ¨iOS 8.1ï¼Œ9.0ï¼Œ10.3ç³»ç»Ÿçš„æ¨¡æ‹Ÿå™¨ï¼Œæ­£å¸¸æ˜¾ç¤ºï¼š<br/>
<img src="http://upload-images.jianshu.io/upload_images/1300265-35baf41f74e02303.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/250" alt="QQ20170504-143253@2x.png"/></p>

<h5 id="toc_6">2. åªç»™å­—ç¬¦ä¸²æŸä¸€éƒ¨åˆ†æ·»åŠ ä¸‹åˆ’çº¿æ•ˆæœ</h5>

<p>å¦‚ï¼šå­—ç¬¦ä¸²&quot;123456&quot;ï¼Œåªç»™â€œ456â€æ·»åŠ ä¸‹åˆ’çº¿</p>

<pre><code class="language-text">NSMutableAttributedString *attrStr = [[NSMutableAttributedString alloc] initWithString:@&quot;123456&quot;];
[attrStr setAttributes:@{NSUnderlineStyleAttributeName : @(NSUnderlineStyleSingle)}
                 range:NSMakeRange(3, 3)];
label.attributedText = attrStr;
</code></pre>

<p>åœ¨iOS 9.0ã€ iOS 10.3æ˜¾ç¤ºå¦‚ä¸‹ï¼š<br/>
<img src="http://upload-images.jianshu.io/upload_images/1300265-af100dadac64b99a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/250" alt="QQ20170504-151351@2x.png"/></p>

<p>åœ¨iOS 8.1æ˜¾ç¤ºå¦‚ä¸‹ï¼ˆNSUnderlineStyleAttributeNameåœ¨iOS 8.1ä¸ç®¡ç”¨ï¼‰ï¼š<br/>
<img src="http://upload-images.jianshu.io/upload_images/1300265-4d62708aa66f3ba4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/250" alt="QQ20170504-151604@2x.png"/></p>

<h5 id="toc_7">å¦‚ä½•åœ¨iOS 8çš„ç³»ç»Ÿé‡Œé¢ä½¿æ·»åŠ ä¸‹åˆ’çº¿æ–¹æ³•ç”Ÿæ•ˆï¼Ÿ</h5>

<blockquote>
<p>åœ¨iOS 8 éœ€è¦é¢å¤–ç»™å…¶ä»–å­—ç¬¦ä¸²è®¾ç½®@{NSUnderlineStyleAttributeName : @(NSUnderlineStyleNone)}ï¼Œæ‰èƒ½æ­£å¸¸æ˜¾ç¤º</p>
</blockquote>

<p>ä»£ç ï¼š</p>

<pre><code class="language-text">NSMutableAttributedString *attrStr = [[NSMutableAttributedString alloc] initWithString:@&quot;123456&quot;
                                                                            attributes:@{NSUnderlineStyleAttributeName : @(NSUnderlineStyleNone)}];
[attrStr setAttributes:@{NSUnderlineStyleAttributeName : @(NSUnderlineStyleSingle)}
                 range:NSMakeRange(3, 3)];
label.attributedText = attrStr;
</code></pre>

<p>æ•ˆæœï¼š<br/>
<img src="http://upload-images.jianshu.io/upload_images/1300265-22e1dbb23d008228.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/250" alt="QQ20170504-152134@2x.png"/></p>

<h4 id="toc_8">æ€»ç»“ï¼š</h4>

<ol>
<li>ç»™æ•´ä¸ªå­—ç¬¦ä¸²æ·»åŠ æ•ˆæœ
<ul>
<li>åˆ é™¤çº¿ï¼šè®¾ç½®<code>@{NSStrikethroughStyleAttributeName : @(NSUnderlineStyleSingle)}</code></li>
<li>ä¸‹åˆ’çº¿ï¼šè®¾ç½®<code>@{NSUnderlineStyleAttributeName : @(NSUnderlineStyleSingle)}</code></li>
</ul></li>
<li>  ç»™éƒ¨åˆ†å­—ç¬¦æ·»åŠ æ•ˆæœ
<ul>
<li>åˆ é™¤çº¿ï¼š<br/>
ç»™å…¨éƒ¨å­—ç¬¦ä¸²è®¾ç½®<code>@{NSStrikethroughStyleAttributeName : @(NSUnderlineStyleNone)}</code><br/>
æ·»åŠ åˆ é™¤çº¿çš„å­—ç¬¦ä¸²è®¾ç½®<code>@{NSStrikethroughStyleAttributeName : @(NSUnderlineStyleSingle), NSBaselineOffsetAttributeName : @0}</code></li>
<li>ä¸‹åˆ’çº¿ï¼š<br/>
ç»™å…¨éƒ¨å­—ç¬¦ä¸²è®¾ç½®<code>@{NSUnderlineStyleAttributeName : @(NSUnderlineStyleNone)}</code><br/>
æ·»åŠ ä¸‹åˆ’çº¿çš„å­—ç¬¦ä¸²è®¾ç½®<code>@{NSUnderlineStyleAttributeName : @(NSUnderlineStyleSingle)</code></li>
</ul></li>
</ol>

<h6 id="toc_9">å‚è€ƒé“¾æ¥</h6>

<p><a href="http://stackoverflow.com/questions/43074652/ios-10-3-nsstrikethroughstyleattributename-is-not-rendered-if-applied-to-a-sub">stackoverflow</a></p>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2017/05/04</span>
                    
          				   
                    

                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="2017-03-29%2019%3A30%3A53.html">
                
                  <h1>iOSä½¿ç”¨OCLintåšé™æ€ä»£ç åˆ†æ</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<h2 id="toc_0">åˆè¯†OCLint</h2>

<blockquote>
<p>OCLintæ˜¯ä¸€ä¸ªé™æ€ä»£ç åˆ†æå·¥å…·,æé«˜è´¨é‡å’Œå‡å°‘ç¼ºé™·é€šè¿‡æ£€æŸ¥C ã€C++ å’ŒObjective-C ä»£ç å’Œå¯»æ‰¾æ½œåœ¨çš„é—®é¢˜,å¦‚:</p>

<ul>
<li>å¯èƒ½çš„ç¼ºé™· - ç©ºçš„if / else / try / catch / finallyè¯­å¥</li>
<li>æœªä½¿ç”¨çš„ä»£ç  - æœªä½¿ç”¨çš„å±€éƒ¨å˜é‡å’Œå‚æ•°</li>
<li>å¤æ‚çš„ä»£ç  - å¾ˆé«˜çš„åœˆå¤æ‚åº¦,NPathå¤æ‚æ€§å’Œå¤ªé«˜çš„NCSS</li>
<li>ä»£ç å¼‚å‘³ - é•¿æ–¹æ³•å’Œå‚æ•°åˆ—è¡¨</li>
<li>é•¿æ–¹æ³•å’Œå‚æ•°åˆ—è¡¨ä¸å¥½çš„å®è·µâ€”â€”å€’é€»è¾‘å’Œå‚æ•°é‡æ–°åˆ†é…</li>
<li>â€¦<br/>
é™æ€ä»£ç åˆ†ææ˜¯ä¸€ä¸ªæ¥æ£€æµ‹å¯¹äºç¼–è¯‘ä¸å¯è§çš„ç¼ºé™·çš„å…³é”®æŠ€æœ¯ã€‚</li>
</ul>
</blockquote>

<p>æ³¨ï¼š* NPath <em>å¤æ‚åº¦æ˜¯ä¸€ä¸ªæ–¹æ³•ä¸­å„ç§å¯èƒ½çš„æ‰§è¡Œè·¯å¾„æ€»å’Œ ï¼›</em> NCSS * æœ‰æ•ˆä»£ç è¡Œ <br/>
ä»¥ä¸Šç¿»è¯‘è‡ª<a href="http://oclint.org/">OCLintå®˜ç½‘</a></p>

<h2 id="toc_1">å®‰è£…</h2>

<p>ä½¿ç”¨ç¬¬ä¸‰æ–¹çš„è½¯ä»¶ä¼šæ¯”ä½¿ç”¨xcodebuildæ–¹ä¾¿äº›<br/>
æœ€æ–°xctoolçš„buildæ–¹æ³•å·²ç»å¼ƒç”¨ï¼Œä¸èƒ½é…åˆOCLintä½¿ç”¨ï¼Œæ¨èä½¿ç”¨<a href="http://docs.oclint.org/en/stable/guide/xcpretty">xcpretty</a></p>

<pre><code class="language-text">// å®‰è£…OCLint
brew tap oclint/formulae
brew install oclint
// å®‰è£…xcpretty
gem install xcpretty
</code></pre>

<p>å¦‚æœæœªå®‰è£…<a href="https://brew.sh/index_zh-cn.html">home brew</a>ï¼Œè‡ªè¡Œå»å®˜ç½‘æŒ‰æç¤ºå®‰è£…</p>

<h4 id="toc_2">æ›´æ–°</h4>

<pre><code class="language-text">// ä»¥åå¯èƒ½éœ€è¦æ›´æ–°
brew update
brew upgrade oclint
</code></pre>

<h2 id="toc_3">ä½¿ç”¨</h2>

<p>åœ¨ç»ˆç«¯è¿›å…¥é¡¹ç›®ç›®å½•ï¼Œç„¶åæ›¿æ¢workspaceçš„åå­—å’Œschemeçš„åå­—ï¼Œå°†ä¿®æ”¹å¥½çš„å‘½ä»¤ç²˜è´´åˆ°ç»ˆç«¯æ‰§è¡Œï¼Œç­‰å¾…å‘½ä»¤æ‰§è¡Œå®Œæ¯•</p>

<pre><code class="language-text">myworkspace=haha.xcworkspace # æ›¿æ¢workspaceçš„åå­—
myscheme=haha # æ›¿æ¢schemeçš„åå­—
xcodebuild -workspace $myworkspace -scheme $myscheme clean&amp;&amp;
xcodebuild -workspace $myworkspace -scheme $myscheme \
-configuration Debug \
| xcpretty -r json-compilation-database -o compile_commands.json&amp;&amp;
oclint-json-compilation-database -e Pods -- \
-report-type html -o oclint_result.html \
-rc LONG_LINE=200 \
-max-priority-1=100000 \
-max-priority-2=100000 \
-max-priority-3=100000; \
rm compile_commands.json;
if [ -f ./oclint_result.html ]; then echo &#39;-----åˆ†æå®Œæ¯•-----&#39;
else echo &quot;-----åˆ†æå¤±è´¥-----&quot;; fi
</code></pre>

<p>ä¸­é—´å¯èƒ½ä¼šåœ¨<code>Build Succeeded</code>åé¢ç­‰å¾…ä¸€æ®µæ—¶é—´ï¼Œè¿™æ˜¯å› ä¸ºOCLintåœ¨åˆ†ææ–‡ä»¶<br/>
ç­‰å¾…å‘½ä»¤æ‰§è¡Œå®Œæˆï¼Œç»ˆç«¯ä¼šæ‰“å°å‡º<code>-----åˆ†æå®Œæ¯•-----</code>å­—æ ·ï¼Œ<br/>
æ‰“å¼€é¡¹ç›®ç›®å½•ï¼Œä¼šçœ‹åˆ°ç›®å½•ä¸‹ä¼šå¤šå‡ºä¸€ä¸ª** oclint_result.html **çš„æ–‡ä»¶</p>

<p><strong>å¦‚æœ</strong>æ²¡æœ‰ä½¿ç”¨cocoapodsï¼Œåˆ™å»æ‰<code>myworkspace=haha.xcworkspace</code>ã€<code>-workspace $myworkspace</code>ã€<code>-workspace $myworkspace</code>ï¼Œç„¶åå†åœ¨ç»ˆç«¯æ‰§è¡Œ<br/><br/>
å¦å¤–å¯ä»¥è‡ªå·±å»ºä¸€ä¸ªxx.shçš„æ–‡ä»¶ï¼Œå°†ä¸Šé¢ä»£ç ç²˜è´´è¿›å»ï¼Œæ¯æ¬¡åœ¨å‘½ä»¤è¡Œè¿›å…¥xx.shæ‰€åœ¨ç›®å½•æ‰§è¡Œ<code>bash xx.sh</code>å°±å¯ä»¥äº†</p>

<h2 id="toc_4">æŸ¥çœ‹</h2>

<p>åŒå‡»æ‰“å¼€oclint_result.htmlæ–‡ä»¶ï¼Œæ ·å¼å¦‚ä¸‹<br/>
OCLintçš„åˆ†æç»“æœï¼š<br/>
 ä¼˜å…ˆçº§çš„çº§åˆ«æ˜¯ä»<code>Priority 1, Priority 2, Priority 3</code> ä¾æ¬¡é™ä½çš„<br/>
<code>Total Files</code> æ€»æ–‡ä»¶æ•°<br/>
<code>Files with Violations</code> è¿è§„æ–‡ä»¶æ•°<br/>
<code>Compiler Warnings</code> è¡¨ç¤ºé¡¹ç›®ä¸­çš„è­¦å‘Šâš ï¸<br/>
<code>Compiler Errors</code> è¡¨ç¤ºç¼–è¯‘é”™è¯¯<br/>
<code>Location</code> è¡¨ç¤ºè­¦å‘Šçš„ä½ç½®<br/>
æŠ¥å‘Šä¸­çš„æè¿°å…¶å®éå¸¸æ¸…æ™°ï¼Œä¸€èˆ¬æ‰¾åˆ°ä»£ç ä½ç½®ï¼Œç»“åˆä»£ç ç†è§£ä¸‹ï¼Œè‡ªå·±åŸºæœ¬éƒ½èƒ½æ˜ç™½äº†<br/>
å¯ä»¥ç›´æ¥å¤åˆ¶è·¯å¾„åˆ°Chromeæ‰“å¼€æŸ¥çœ‹ï¼Œå³å‡»æŸ¥çœ‹æºç å°±æœ‰è¡Œå·<br/>
<img src="http://upload-images.jianshu.io/upload_images/1300265-c27dff270b5f1b34.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Paste_Image.png"/></p>

<h2 id="toc_5">è‡ªå®šä¹‰è§„åˆ™</h2>

<p>ä¸Šé¢çš„å‘½ä»¤ä¸­<br/>
<code>-e Pods</code> è¡¨ç¤ºç§»é™¤Podsæ–‡ä»¶å¤¹é‡Œä»£ç çš„åˆ†æ, å¦‚æœæœ‰ç»§ç»­<code>-e Debug.m</code><br/>
<code>-report-type html</code> è¡¨ç¤ºåˆ†æåè¾“å‡ºçš„æ–‡ä»¶ç±»å‹ä¸ºHTMLï¼Œ<a href="http://docs.oclint.org/en/stable/howto/selectreporters.html">æŸ¥çœ‹å…¶ä»–æ”¯æŒçš„æ–‡ä»¶ç±»å‹</a><br/>
<code>-o oclint_result.html</code> è¡¨ç¤ºè¾“å‡ºåˆ°<code>oclint_result.html</code>è¿™ä¸ªæ–‡ä»¶ä¸­()<br/>
<code>-rc LONG_LINE=200</code> è¡¨ç¤ºæ¯è¡Œæœ€å¤§å­—èŠ‚é•¿åº¦ä¸º200ï¼ˆé»˜è®¤å€¼ä¸º100ï¼Œæ„Ÿè§‰åœ¨OCä¸­100å®Œå…¨ä¸å¤Ÿç”¨å•Šï¼‰</p>

<h6 id="toc_6">ä¸€äº›å¸¸ç”¨è§„åˆ™çš„æ³¨é‡Š</h6>

<pre><code class="language-text"># --å‘½å
# å˜é‡åå­—æœ€é•¿å­—èŠ‚
#-rc=LONG_VARIABLE_NAME=20 \
# å˜é‡åå­—æœ€çŸ­å­—èŠ‚
#-disable-rule ShortVariableName \
# --size
# åœˆå¤æ‚åº¦
#-re=CYCLOMATIC_COMPLEXITY=10 \
# æ¯ä¸ªç±»æœ€è¡Œæ•°
#-rc=LONG_CLASS=700 \
# æ¯è¡Œå­—èŠ‚æ•°é‡
#-rc=LONG_LINE=200 \
# æ¯ä¸ªæ–¹æ³•è¡Œæ•°
#-rc=LONG_METHOD=80 \
# å¿½ç•¥æ³¨é‡Šåæ‹¬å·åçš„æœ‰æ•ˆä»£ç è¡Œæ•°
#-rc=NCSS_METHOD=40 \
# åµŒå¥—æ·±åº¦
#-rc=NESTED_BLOCK_DEPTH=5 \
# å­—æ®µæ•°é‡
#-rc=TOO_MANY_FIELDS=20 \
# æ–¹æ³•æ•°é‡
#-rc=TOO_MANY_METHODS=30 \
# æ–¹æ³•å‚æ•°
#-rc=TOO_MANY_PARAMETERS=6
</code></pre>

<p><a href="http://docs.oclint.org/en/stable/manual/oclint-json-compilation-database.html">oclint-json-compilation-databaseå‘½ä»¤æ‰‹å†Œ</a><br/>
<a href="http://docs.oclint.org/en/stable/manual/oclint.html">oclintå‘½ä»¤æ‰‹å†Œ</a><br/>
<a href="http://oclint-docs.readthedocs.io/en/stable/howto/thresholds.html">OCLintè‡ªå®šä¹‰è§„åˆ™ä»‹ç»</a><br/>
<a href="http://docs.oclint.org/en/stable/rules/index.html">OCLintå…¨éƒ¨è§„åˆ™ä»‹ç»</a><br/>
æ–‡æ¡£é‡Œé¢æœ‰æ¯ä¸ªè§„åˆ™çš„demoå’Œå¯¹åº”çš„å‘½ä»¤åå­—ï¼Œä¸Šé¢æ²¡ä»‹ç»åˆ°çš„å¤§å®¶å¯ä»¥å»æ–‡æ¡£æŸ¥è¯¢</p>

<h2 id="toc_7">Xcodeé›†æˆOCLint</h2>

<p>è¿™é‡Œæœ‰å®˜ç½‘æŒ‡å¯¼ç½‘å€ï¼Œååˆ†ç®€å•<br/>
<a href="http://oclint-docs.readthedocs.io/en/stable/guide/xcode.html">http://oclint-docs.readthedocs.io/en/stable/guide/xcode.html</a><br/>
ä½†æ˜¯æœ‰ç‚¹å°å‘ï¼šå¯èƒ½å‡ºç°ä¸‹é¢é”™è¯¯</p>

<h6 id="toc_8">in `===&#39;: invalid byte sequence in US-ASCII</h6>

<p>æ­¤æ—¶ä½ éœ€è¦åœ¨xcodeçš„è„šæœ¬çš„æœ€å‰é¢ï¼ŒåŠ ä¸Šï¼š</p>

<pre><code class="language-text"># æŒ‡å®šç¼–ç 
export LANG=&quot;zh_CN.UTF-8&quot;
export LC_COLLATE=&quot;zh_CN.UTF-8&quot;
export LC_CTYPE=&quot;zh_CN.UTF-8&quot;
export LC_MESSAGES=&quot;zh_CN.UTF-8&quot;
export LC_MONETARY=&quot;zh_CN.UTF-8&quot;
export LC_NUMERIC=&quot;zh_CN.UTF-8&quot;
export LC_TIME=&quot;zh_CN.UTF-8&quot;
export LC_ALL=
</code></pre>

<p>æˆ‘å†™äº†ä¸€ä¸ªç®€å•çš„è„šæœ¬æ–‡ä»¶<a href="https://github.com/harddog/oclint_apply">oclint_xcode</a>å¤§å®¶å¯ä»¥è‡ªå·±ä¸‹è½½ï¼Œå¯æ›¿æ¢çš„å˜é‡ï¼Œå·²ç»åœ¨è„šæœ¬ä¸­ä½¿ç”¨æ³¨é‡Šæ ‡æ³¨äº†å‡ºæ¥</p>

<p>åˆ›å»ºä¸€ä¸ªOCLintçš„Aggregateï¼Œå°†è„šæœ¬æ”¾åˆ°é¡¹ç›®å·¥ç¨‹æ ¹ç›®å½•ä¸‹ï¼Œåœ¨Run Scriptä¸­åŠ å…¥ä»¥ä¸‹ä»£ç ï¼Œç‚¹å‡»è¿è¡Œå³å¯</p>

<pre><code class="language-text">bash ./oclint.sh
</code></pre>

<h2 id="toc_9">Jenkinsé›†æˆOCLint</h2>

<h6 id="toc_10">1. åˆ›å»ºä¸€ä¸ª<code>PMDOclint.sh</code>çš„æ–‡ä»¶, å°†ä¸‹è¿°ä»£ç æ‹·è´åˆ°æ–‡ä»¶ä¸­ï¼Œå¹¶å°†æ–‡ä»¶æ”¾å…¥åˆ°jenkinsçš„æ ¹ç›®å½•ä¸‹ (ä¾‹å¦‚æˆ‘çš„å°±æ˜¯<code>/Users/buildWork/.jenkins/PMDOclint.sh</code>) , æˆ‘è‡ªå·±ä½¿ç”¨çš„è„šæœ¬æ”¾åˆ°äº†ä»“åº“ä¸­<a href="https://github.com/harddog/oclint_apply">oclint_apply</a>ï¼Œå¯ä»¥å»é‡Œé¢ä¸‹è½½<code>apply_jenkins/PMDOclint.sh</code></h6>

<h6 id="toc_11">2. jenkinséœ€è¦å®‰è£…<code>PMD Plugin</code>æ’ä»¶</h6>

<h6 id="toc_12">3. jenkinsæ–°å»ºä¸€ä¸ªé¡¹ç›®ï¼ŒGité…ç½®æˆéœ€è¦ä»£ç åˆ†æçš„ä»£ç åº“</h6>

<h6 id="toc_13">4. å‰©ä¸‹çš„æŒ‰ç…§ä¸‹å›¾é…ç½®ï¼Œï¼ˆå°†<code>PMDOclint.sh</code>æ”¾åˆ°Jenkinsçš„ä¸»ç›®å½•ï¼Œå¦‚æœå‡ºç°é—®é¢˜ï¼Œæ¶‰åŠåˆ°çš„è·¯å¾„ï¼Œè¯·æ³¨æ„æ£€æŸ¥ä¸€ä¸‹ï¼‰</h6>

<p><img src="http://upload-images.jianshu.io/upload_images/1300265-7fff0c8f482d4cbc.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="QQ20170628-170241.png"/></p>

<h6 id="toc_14">5. æ•ˆæœ</h6>

<p><img src="http://upload-images.jianshu.io/upload_images/1300265-2abc5615c7298b2c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="æ•ˆæœå›¾"/></p>
<br/>
<h4 id="toc_15">Warningâ—ï¸</h4>

<p>(ä¸€). xcodebuildå‘½ä»¤ä¸å¥½ç”¨çš„æ—¶å€™ï¼Œä½¿ç”¨<code>com + opt + shift + k</code> å’Œ <code>com + shift + k</code> æœ‰80%çš„å¯èƒ½è§£å†³ğŸ˜‚<br/>
(äºŒ).  <code>oclint: error: one compiler command contains multiple jobs:</code> <br/>
   è§£å†³æ–¹æ¡ˆï¼š<br/><br/>
   ###### 1. å¦‚æœç”µè„‘é‡Œé¢å®‰è£…äº†ä¸¤ä¸ªXcodeçš„è¯å¯èƒ½ä¼šæŠ¥ä¸Šé¢é”™è¯¯ï¼Œåˆ æ‰å…¶ä»–åªå‰©ä¸€ä¸ª<br/>
   ###### xcode9ä»¥å(OCLint version 0.13, Version 9.2 beta (9C34b) æµ‹è¯•å¯ç”¨)ï¼š<br/><br/>
   ###### 2.1 æ›´æ–°åˆ°æœ€æ–°çš„<code>oclint</code>, <code>brew upgrade oclint</code><br/>
   ######  2.2 å»githubä¸‹è½½æœ€æ–°çš„<a href="https://github.com/harddog/oclint_apply">oclint.sh</a>ï¼Œæ›¿æ¢æ‰æ—§çš„<br/>
   ###### 3.  è¯•è¯•æ‰‹åŠ¨å°† å·¥ç¨‹=&gt; <code>Build Settings</code> =&gt; æœç´¢<code>COMPILER_INDEX_STORE_ENABLE</code> è¯¥é…ç½®è®¾æˆNO<br/>
<br/><br/>
<a href="https://github.com/harddog/oclint_apply">oclint_applyä»“åº“åœ°å€</a></p>

<h5 id="toc_16">å‚è€ƒæ–‡ç« ï¼š</h5>

<p><a href="http://blog.csdn.net/uxyheaven/article/details/50818107">ç”¨OCLintç»™iOSä»£ç åšé™æ€åˆ†æ</a><br/>
<a href="https://segmentfault.com/a/1190000005155260"><a href="https://segmentfault.com/a/1190000005155260">OCLint è§„åˆ™ä¸ç»“æœåˆ†æ</a></a>e&#39;e&#39;e</p>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2017/03/29</span>
                    
          				   
                    

                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="2017-03-24%2013%3A35%3A29.html">
                
                  <h1>UIBarButtonItemç‚¹å‡»èŒƒå›´è¿‡å¤§</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<h2 id="toc_0">è§£å†³NavgationBaré‡Œé¢UIBarButtonItemç‚¹å‡»èŒƒå›´è¿‡å¤§çš„é—®é¢˜</h2>

<h4 id="toc_1">é—®é¢˜</h4>

<p>å¤§å®¶è‚¯å®šéƒ½è‡ªå®šä¹‰è¿‡NavgationBarçš„è¿”å›æŒ‰é’®å§ï¼ŒæŒ‰ç…§ä¸‹é¢æ–¹æ³•è®¾ç½®çš„æ—¶å€™ï¼Œä¼šæœ‰ç‚¹å‡»èŒƒå›´è¿‡å¤§çš„é—®é¢˜</p>

<pre><code class="language-text">    UIButton *leftButton = [UIButton buttonWithType:UIButtonTypeCustom];
    leftButton.frame = CGRectMake(0, 0, 30, 30);
    leftButton.backgroundColor = [UIColor redColor];
    [leftButton addTarget:self action:@selector(leftButtonAction) forControlEvents:UIControlEventTouchUpInside];
    
    UIBarButtonItem *leftItem = [[UIBarButtonItem alloc] initWithCustomView:leftButton];
    self.navigationItem.leftBarButtonItem = leftItem;
</code></pre>

<p><img src="http://upload-images.jianshu.io/upload_images/1300265-938e2cd15c73f60a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/200" alt="Paste_Image.png"/></p>

<h4 id="toc_2">è§£å†³</h4>

<p>åœ¨Buttonå¤–é¢åŒ…ä¸€å±‚Viewå°±å¯ä»¥äº†ï¼Œå°±ä¼šæ˜¯æ­£å¸¸çš„Buttonçš„ç‚¹å‡»èŒƒå›´äº†</p>

<pre><code class="language-text">    UIButton *leftButton = [UIButton buttonWithType:UIButtonTypeCustom];
    leftButton.frame = CGRectMake(0, 0, 30, 30);
    leftButton.backgroundColor = [UIColor redColor];
    [leftButton addTarget:self action:@selector(leftButtonAction) forControlEvents:UIControlEventTouchUpInside];
    
    UIView *menuButtonContainer = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 30, 30)];
    [menuButtonContainer addSubview:leftButton];
    
    UIBarButtonItem *leftItem = [[UIBarButtonItem alloc] initWithCustomView:menuButtonContainer];
    self.navigationItem.leftBarButtonItem = leftItem;
</code></pre>

<h2 id="toc_3">è§‚å¯Ÿ</h2>

<p>å°è¯•äº†å¥½å¤šåº”ç”¨ï¼ŒåŸºæœ¬ä¸Šéƒ½æœ‰è¿™ä¸ªç°è±¡ï¼Œä¸æ˜¯å¾ˆç»†å¿ƒçš„äººæ ¹æœ¬å‘ç°ä¸äº†ï¼Œä½†æ˜¯æˆ‘å¼€å‘çš„APPè¿”å›æŒ‰é’®ç»™çš„å›¾ç‰‡å¤ªå°äº†ğŸ˜‚    æ•ˆæœååˆ†æ˜æ˜¾çš„ï¼Œæ‰¾åˆ°è§£å†³æ–¹æ³•ä»¥åï¼Œå‘ç°æŒ‰é’®å¤ªå°äº†ï¼Œbuttonçš„frameæ˜¯æ ¹æ®å›¾ç‰‡å¤§å°æ¥çš„ï¼Œä¸æ‰“ç®—æ”¹æˆæ­£å¸¸çš„äº†Â Â (;ï¿¢ï¼¿ï¿¢)Â Â Â </p>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2017/03/24</span>
                    
          				   
                    

                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="2017-03-23%2023%3A01%3A14.html">
                
                  <h1>H5é¡µé¢ä¸å“åº”WebViewä»£ç†æ–¹æ³•</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<h2 id="toc_0">é—®é¢˜</h2>

<p>åœ¨é¡¹ç›®ä¸­æ¥å…¥äº†WKWebViewï¼Œåœ¨è°ƒè¯•ç½‘é¡µçš„è¿‡ç¨‹ä¸­ç¢°åˆ°ä¸€ä¸ªé—®é¢˜ï¼š<br/>
åœ¨ç‚¹å‡»aæ ‡ç­¾çš„æ—¶å€™ï¼Œä¸ä¼šè§¦å‘webViewçš„<code>navigationDelegate</code>ä»£ç†æ–¹æ³•ï¼Œå¦‚ï¼š<br/>
<code>webView:decidePolicyForNavigationAction:decisionHandler:</code><br/>
<code>webView:decidePolicyForNavigationResponse:decisionHandler:</code>ç­‰ç­‰ï¼Œ<br/>
åŸæœ¬æˆ‘æ˜¯åœ¨ç½‘é¡µåŠ è½½å®Œæˆåæ›´æ–°ä¸‹ç½‘é¡µçš„è¿”å›æŒ‰é’®çš„ï¼Œè¿™ä¸‹ä¸èµ·ä½œç”¨äº†ã€‚</p>

<h4 id="toc_1">aæ ‡ç­¾çš„ä»£ç </h4>

<h6 id="toc_2">ï¼ˆaæ ‡ç­¾çš„äº‹ä»¶å·²ç»è¢«æ‹¦æˆªï¼Œç½‘é¡µä½¿ç”¨çš„æ˜¯vueï¼‰</h6>

<pre><code class="language-text">&lt;a class=&quot;activity-item-wrapper&quot; href=&quot;/activity-detail/588425470926a819f7b8d61d&quot;&gt;  &lt;/a&gt;
</code></pre>

<h2 id="toc_3">æ›²çº¿æ•‘å›½</h2>

<p>è™½ç„¶ä»£ç†æ–¹æ³•ä¸ä¼šå“åº”ï¼Œä½†æ˜¯ç»è¿‡å°è¯•<code>canGoBack</code>è¿™ä¸ªå±æ€§çš„å€¼è¿˜æ˜¯ä¼šéšç€é¡µé¢çš„å˜åŒ–è€Œå˜åŒ–çš„ï¼Œæ‰€ä»¥æˆ‘ç›´æ¥ç›‘å¬è¿™ä¸ªå±æ€§ï¼Œä¹Ÿå¯ä»¥è¾¾åˆ°æˆ‘æƒ³è¦çš„æ•ˆæœ</p>

<pre><code class="language-text">[self.webView.realWebView addObserver:self forKeyPath:@&quot;canGoBack&quot; options:NSKeyValueObservingOptionNew context:nil];
</code></pre>

<h2 id="toc_4">ä¸ºä»€ä¹ˆä¼šå‡ºç°è¿™ç§é—®é¢˜</h2>

<p>ç»è¿‡è¯·æ•™æˆ‘å¸å‰ç«¯çš„åŒå­¦åï¼Œäº†è§£åˆ°åŸç½‘é¡µä½¿ç”¨çš„æ˜¯H5çš„History Apiï¼Œåº”è¯¥æ˜¯åœ¨ä¸åˆ·æ–°é¡µé¢çš„æƒ…å†µä¸‹åˆ‡æ¢Urlï¼Œå¯¼è‡´WKWebViewæ²¡æœ‰Callä»£ç†æ–¹æ³•ï¼Œä½†æ˜¯canGoBackå’ŒcanGoForwardå±æ€§æ˜¯å¯ä»¥æ£€æµ‹åˆ°çš„ã€‚ç°åœ¨H5çš„ä½“éªŒè¶Šæ¥è¶Šå¥½ï¼Œè®¸å¤šSPAåº”ç”¨éƒ½æ˜¯é‡‡ç”¨çš„è¿™ç§æ–¹æ³•ã€‚</p>

<blockquote>
<p>å¤§æ¦‚æµç¨‹ï¼š</p>

<ol>
<li>åœ¨Aé¡µé¢ é€šè¿‡å‘AJAXè¯·æ±‚ è¯·æ±‚é¡µé¢ä¸­çš„Bæ•°æ®ã€‚</li>
<li>åœ¨é¡µé¢Aä¸­é€šè¿‡JSè£…è½½ç›¸åº”çš„ä¿¡æ¯åˆ°ç›¸åº”çš„ä½ç½®æ¥ã€‚</li>
<li>é€šè¿‡History APIåœ¨ä¸åˆ·æ–°é¡µé¢çš„æƒ…å†µä¸‹åœ¨æµè§ˆå™¨çš„åœ°å€æ ä¸­ä»é¡µé¢Açš„URLåœ°å€åˆ‡æ¢åˆ°é¡µé¢Bçš„URLåœ°å€ã€‚</li>
</ol>
</blockquote>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2017/03/23</span>
                    
          				   
                    

                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="2017-02-22%2023%3A38%3A48.html">
                
                  <h1>iOS8 WKWebView åœ¨ç‰¹å®šæƒ…å†µä¸‹çš„å´©æºƒ</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<p>iOS8ç³»ç»Ÿæ˜¯è‹¹æœç¬¬ä¸€æ¬¡å¼•å…¥WKWebViewï¼Œæ‰€ä»¥æœ‰å¥½å¤šä¸œè¥¿è¿˜ä¸å®Œå–„ï¼Œä¸‹é¢è®°å½•ä¸€æ¬¡ç¢°åˆ°çš„Crash</p>

<p>åœ¨iOS 8ä¸‹ï¼Œ å…ˆè®¾ç½®WKWebViewçš„</p>

<pre><code class="language-text">webView.allowsBackForwardNavigationGestures = YES;
</code></pre>

<p>ç„¶åå†è®¾ç½®ä¸ºNOçš„è¯</p>

<pre><code class="language-text">webView.allowsBackForwardNavigationGestures = NO;
</code></pre>

<p>åªè¦æ‰‹æŒ‡ä¸€ç¢°å±å¹•ï¼Œå°±ä¼šå‡ºç°Crashï¼Œæ—¥å¿—ä¸»è¦å¦‚ä¸‹ï¼š</p>

<pre><code class="language-text">
#0 Thread
NSInvalidArgumentException
-[UIView gestureRecognizer:shouldReceiveTouch:]: unrecognized selector sent to instance 0x125da47f0
</code></pre>

<p>æˆ–è€…ï¼š</p>

<pre><code class="language-text">
#0 Thread
NSInvalidArgumentException
-[WKCompositingView gestureRecognizer:shouldReceiveTouch:]: unrecognized selector sent to instance 0x12fc17550
</code></pre>

<h2 id="toc_0">æ³¨</h2>

<p>ä»¥ä¸Šæƒ…å†µåªä¼šåœ¨iOS 8å‡ºç°ï¼Œåœ¨8ä»¥ä¸Šç‰ˆæœ¬æ²¡æœ‰é—®é¢˜ã€‚</p>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2017/02/22</span>
                    
          				   
                    

                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="2017-02-16%2014%3A04%3A30.html">
                
                  <h1>View.layer.maskå±æ€§çš„åº”ç”¨(ç”»åœ†è§’ï¼Œç”»å¿ƒ)</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<h4 id="toc_0">å‰è¨€</h4>

<p>çœ‹åˆ°ä»€ä¹ˆappï¼Œè„‘å­é‡Œéƒ½ä¼šä¸è‡ªè§‰çš„æƒ³è¿™ä¸ªä¸œè¥¿æ˜¯æ€ä¹ˆå®ç°çš„ã€‚å“”å“©å“”å“©ä½œä¸ºæˆ‘ç”¨æ¥å¶å°”çœ‹çœ‹é¬¼ç•œï¼Œè¿½è¿½æ–°ç•ªçš„ä¸€ä¸ªåº”ç”¨ï¼Œæ„Ÿè§‰å®ƒæŸäº›ç»†èŠ‚çš„è®¾è®¡ç¡®å®ä¸é”™ã€‚ä¾‹å¦‚ä¸‹å›¾ä¸­çš„æ ‡æ³¨<strong>â‘ </strong>å¤„çš„åœ†è§’</p>

<p><img src="http://upload-images.jianshu.io/upload_images/1300265-b6424aac39015512.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/310" alt="å“”å“©å“”å“©çš„iOSå®¢æˆ·ç«¯é¦–é¡µæˆªå›¾"/></p>

<h4 id="toc_1">è®¾ç½®Viewçš„å››ä¸ªè§’éƒ½ä¸ºåœ†è§’</h4>

<p>åƒå›¾ä¸­<strong>â‘¡</strong>å¤„çš„4ä¸ªè§’éƒ½ä¸ºåœ†è§’ï¼Œè¿™éƒ½æ˜¯ä¸€äº›åŸºç¡€çš„ä¸œè¥¿æ„Ÿè§‰å°±æ²¡å¿…è¦å†™äº†ï¼Œä»€ä¹ˆä½ è¿˜ä¸çŸ¥é“ï¼Ÿç‰¹åˆ«ç®€å•ï¼Œåªéœ€è¦è®¾ç½®ä¸‹é¢çš„å±æ€§å°±å¯ä»¥äº†ï¼Œäº§ç”Ÿåœ†è§’å¼•å‘çš„æ€§èƒ½é—®é¢˜æ­¤å¤„ä¸åšè®¨è®ºï¼Œè¿™æ ·å†™ä¸€èˆ¬åº”ç”¨æ˜¯æ²¡æœ‰é—®é¢˜çš„</p>

<pre><code class="language-text">view.layer.cornerRadius = 10;
view.layer.masksToBounds = YES;
</code></pre>

<h4 id="toc_2">è®¾ç½®Viewçš„ä¸¤ä¸ªè§’éƒ½ä¸ºåœ†è§’</h4>

<p>åƒå›¾<strong>â‘ </strong>ä¸­çš„ä¸¤ä¸ªåœ†è§’ï¼Œå½“ç„¶å°±å®ç°æ•ˆæœæ¥è¯´ï¼Œæ–¹æ³•æœ‰å¾ˆå¤šç§ï¼Œæ­¤å¤„è®²ä¸€ä¸ªï¼Œä½¿ç”¨CALayerçš„maskå±æ€§ï¼š</p>

<pre><code class="language-text">UIBezierPath *maskPath = [UIBezierPath bezierPathWithRoundedRect:self.bounds
                                                   byRoundingCorners:UIRectCornerTopLeft | UIRectCornerTopRight
                                                         cornerRadii:CGSizeMake(15, 15)];
CAShapeLayer *maskLayer = [[CAShapeLayer alloc] init];
maskLayer.frame = self.bounds;
maskLayer.path = maskPath.CGPath;
self.layer.mask = maskLayer;
</code></pre>

<h4 id="toc_3">è®¾ç½®Viewæ˜¾ç¤ºä¸€ä¸ªå¿ƒå½¢â¤ï¸</h4>

<p>å…¶å®å’Œæ˜¾ç¤ºä¸¤ä¸ªåœ†è§’çš„æ–¹æ³•å·®ä¸å¤šï¼Œåªä¸è¿‡å°±æ˜¯ç»˜åˆ¶å›¾å½¢çš„è·¯å¾„ä¸ä¸€æ ·<br/>
ä¸‹å›¾çš„å›¾ç‰‡ä¸Šä½¿ç”¨ä¸¤æ ¹è´å¡å°”æ›²çº¿ç»˜åˆ¶äº†ä¸€ä¸ªå¿ƒå½¢â¤ï¸ï¼Œæ›²çº¿çš„ç®—å¼ï¼Œæƒ³è¦çœ‹çš„å¯ä»¥çœ‹ä¸‹<a href="https://github.com/harddog/Test-LayerDrawMask">githubçš„å·¥ç¨‹</a><br/>
<img src="http://upload-images.jianshu.io/upload_images/1300265-025bc1bf98319863.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/310" alt="å„ä¸ªå½¢çŠ¶çš„å±•ç¤º"/></p>

<h4 id="toc_4">æ€»ç»“</h4>

<p><strong>maskå±æ€§æ˜¯åšä»€ä¹ˆçš„ï¼Ÿ</strong><br/>
çœ‹ä¸‹è‹¹æœæ–‡æ¡£çš„æè¿°ï¼š</p>

<pre><code class="language-text">The layerâ€™s alpha channel determines how much of the layerâ€™s content and background shows through. Fully or partially opaque pixels allow the underlying content to show through but fully transparent pixels block that content.

The default value of this property is nil nil. When configuring a mask, remember to set the size and position of the mask layer to ensure it is aligned properly with the layer it masks.
</code></pre>

<p>ç¿»è¯‘æˆä¸­æ–‡å°±æ˜¯ï¼š</p>

<blockquote>
<p>è¿™ä¸ªlayerçš„alphaé€šé“å†³å®šå±•ç¤ºå¤šå°‘layerçš„å†…å®¹å’ŒèƒŒæ™¯ï¼Œå®Œå…¨æˆ–éƒ¨åˆ†ä¸é€æ˜çš„åƒç´ å…è®¸ä¸‹é¢çš„å†…å®¹å±•ç¤ºå‡ºæ¥ï¼Œä½†æ˜¯å®Œå…¨é€æ˜çš„åƒç´ ä¼šé˜»ç¢å†…å®¹</p>
</blockquote>

<p><strong>ä¸ºä»€ä¹ˆç”¨<code>CAShapeLayer</code> + <code>UIBezierPath</code>å“ªï¼Ÿ</strong></p>

<blockquote>
<p>UIBezierPathæ˜¯ç³»ç»Ÿå¯¹ç”»å›¾æ–¹æ³•çš„å°è£…ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„è°ƒç”¨ï¼Œè·å–è·¯å¾„path<br/>
<code>@property(nonatomic) CGPathRef CGPath;</code></p>

<p>CAShapeLayeræœ‰pathå±æ€§<br/>
<code>@property(nullable) CGPathRef path;</code><br/>
å¯ä»¥å¾ˆæ–¹ä¾¿çš„å°†ä½ ç”»çš„pathç»˜åˆ¶åˆ°layerä¸Š</p>
</blockquote>

<p>è¿™ä¸¤ä¸ªæ­é…ç®€ç›´å°±æ˜¯ç è¿ç’§åˆã€ç›¸å¾—ç›Šå½°ã€ç›¸è¾…ç›¸æˆã€ä¸å¥½æ„æ€æ²¡è¯äº†ã€‚ã€‚ã€‚</p>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2017/02/16</span>
                    
          				   
                    

                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="2017-02-13%2017%3A38%3A28.html">
                
                  <h1>å¼ºè¿«ç—‡ç¦éŸ³ï¼iOS7ä»¥ä¸Šæ–¹ä¾¿çš„æ”¹å˜çŠ¶æ€æ é¢œè‰²</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<p>åœ¨iOS 9ä»¥åè®¾ç½®çŠ¶æ€æ é¢œè‰²ä¸å»ºè®®ä½¿ç”¨UIApplicationæ¥æ”¹å˜äº†ï¼Œè­¦å‘Šâš ï¸ä¸èƒ½å¿<br/>
<code>- (void)setStatusBarStyle:(UIStatusBarStyle)statusBarStyle animated:(BOOL)animated NS_DEPRECATED_IOS(2_0, 9_0, &quot;Use -[UIViewController preferredStatusBarStyle]&quot;)</code></p>

<p>1.åœ¨å¯¼èˆªæ§åˆ¶å™¨é‡Œé¢å®ç°ä¸‹é¢æ–¹æ³•ï¼š</p>

<pre><code class="language-text">//ä¸€èˆ¬åœ¨BaseNavigationControlleré‡Œé¢å®ç°
/**
 è®¾ç½®æ˜¾ç¤ºæ ˆé¡¶æ§åˆ¶å™¨çš„çŠ¶æ€æ é¢œè‰²
 */
- (UIViewController *)childViewControllerForStatusBarStyle {
    return self.topViewController;
}
</code></pre>

<p>2.åœ¨å­æ§åˆ¶å™¨é‡Œé¢å®ç°</p>

<pre><code class="language-text">- (UIStatusBarStyle)preferredStatusBarStyle {
    return UIStatusBarStyleLightContent;
}
</code></pre>

<p>è¿™æ ·ç³»ç»Ÿpushåˆ°æŸä¸ªæ§åˆ¶å™¨çš„æ—¶å€™å°±ä¼šæ˜¾ç¤ºæ­¤æ§åˆ¶å™¨<code>preferredStatusBarStyle</code>æ–¹æ³•è¿”å›çŠ¶æ€æ styleï¼Œä¸å†™é»˜è®¤æ˜¾ç¤ºé»‘è‰²å­—ä½“çš„çŠ¶æ€æ </p>

<h4 id="toc_0">å¦‚ä½•åŠ¨æ€çš„æ”¹å˜çŠ¶æ€æ é¢œè‰²ï¼Ÿ</h4>

<p>é¡¹ç›®ä¸­æœ‰ä¸šåŠ¡éœ€æ±‚éœ€è¦åŠ¨æ€çš„æ”¹å˜çŠ¶æ€æ é¢œè‰²ï¼ŒStatusBarStyleå¯èƒ½åœ¨ä¸¤ç§çŠ¶æ€ä¹‹é—´æ›¿æ¢ï¼Œæœ€ç®€å•çš„æ˜¯æ‹¿å…¨å±€å˜é‡æ§åˆ¶ï¼Œä½†æ˜¯ä¸ºäº†ä»¥åè°ƒç”¨æ–¹ä¾¿ï¼Œå°±å†™ä¸ªåˆ†ç±»ï¼Œä½¿ç”¨runtime åŠ¨æ€æ›¿æ¢æ–¹æ³•ï¼Œå½“åšä¸€ä¸ªå°ç»ƒä¹ å§ï¼Œä»¥åç”¨ç€ä¹Ÿæ–¹ä¾¿</p>

<p>è´´ä¸€ä¸‹ä»£ç ï¼š</p>

<pre><code class="language-text">// UIViewController+ForcedChangeStatusBarColor.h
#import &lt;UIKit/UIKit.h&gt;

@interface UIViewController (ForcedChangeStatusBarColor)

@property (nonatomic, strong) NSNumber *fcsb_statusBarStyle;

@property (nonatomic, strong) NSNumber *fcsb_hasChange;

/**
 @brief æ§åˆ¶å™¨å¼ºåˆ¶æ›¿æ¢StatusBarStyle
 åªå¯¹è‡ªå®šä¹‰ç³»ç»Ÿå¯¼èˆªæ çš„æ§åˆ¶å™¨ç”Ÿæ•ˆ
 */
- (void)forcedChangeStatusBarStyle:(UIStatusBarStyle)style;

@end

</code></pre>

<pre><code class="language-text">#import &quot;UIViewController+ForcedChangeStatusBarColor.h&quot;
#import &quot;NSObject+CEHook.h&quot;

@implementation UIViewController (ForcedChangeStatusBarColor)

- (void)forcedChangeStatusBarStyle:(UIStatusBarStyle)style {
    
    @synchronized (self) {
        if (self.fcsb_hasChange == nil) {
            // è¿™è¡Œä»£ç åœ¨æ›¿æ¢æ–¹æ³•ï¼Œ å¯ä»¥æ›¿æ¢
            [self cehook_instanceMethodSwizzling:@selector(preferredStatusBarStyle) to:@selector(fcsb_preferredStatusBarStyle)];
            self.fcsb_hasChange = @(YES);
        }
    }
    
    self.fcsb_statusBarStyle = @(style);
    
    // åˆ·æ–° StatusBar
    [self setNeedsStatusBarAppearanceUpdate];
}

- (UIStatusBarStyle)fcsb_preferredStatusBarStyle {
    return [self.fcsb_statusBarStyle integerValue];
}

#pragma mark - get &amp; set
static char kAssociatedObjectKey_HasChange;
- (void)setFcsb_hasChange:(NSNumber *)fcsb_hasChange {
    objc_setAssociatedObject(self, &amp;kAssociatedObjectKey_HasChange, fcsb_hasChange, OBJC_ASSOCIATION_RETAIN_NONATOMIC);
}

- (NSNumber *)fcsb_hasChange {
    return (NSNumber *)objc_getAssociatedObject(self, &amp;kAssociatedObjectKey_HasChange);
}

static void *FCSBOrgiKey = &amp;FCSBOrgiKey;
 - (NSNumber *)fcsb_statusBarStyle {
    return objc_getAssociatedObject(self, &amp;FCSBOrgiKey);
}

- (void)setFcsb_statusBarStyle:(NSNumber *)fcsb_statusBarStyle {
    objc_setAssociatedObject(self,
                             &amp;FCSBOrgiKey,
                             fcsb_statusBarStyle,
                             OBJC_ASSOCIATION_RETAIN_NONATOMIC);
}

@end

</code></pre>

<pre><code class="language-text">#import &quot;NSObject+CEHook.h&quot;

@implementation NSObject (CEHook)

- (void)cehook_instanceMethodSwizzling:(SEL)originSelector to:(SEL)swizzleSelector {
    Class class = [self class];
    
    Method originMethod = class_getInstanceMethod(class, originSelector);
    Method swizzleMethod = class_getInstanceMethod(class, swizzleSelector);
    
    if (!originMethod || !swizzleMethod) {
        return;
    }
    
    class_addMethod(class,
                    originSelector,
                    method_getImplementation(originMethod),
                    method_getTypeEncoding(originMethod));
    class_addMethod(class,
                    swizzleSelector,
                    method_getImplementation(swizzleMethod),
                    method_getTypeEncoding(swizzleMethod));
    
    ///&lt; æ·»åŠ å®Œäº†ä¹‹åè¦é‡æ–°èµ‹å€¼ï¼Œå› ä¸ºåŸæ¥çš„ä¸¤ä¸ªmethodéƒ½æ˜¯çˆ¶ç±»çš„ã€‚å‚è€ƒè‡ªè§https://github.com/rentzsch/jrswizzle/blob/semver-1.x/JRSwizzle.m
    /// addMethod è¿”å› true æ—¶ï¼Œéœ€è¦é‡æ–°å– Method
    Method originMethod2 = class_getInstanceMethod(class, originSelector);
    Method swizzleMethod2 = class_getInstanceMethod(class, swizzleSelector);
    
    // NSLog(@&quot;instanceMethodSwizzling: %p, %p, %p, %p&quot;, originMethod, originMethod2, swizzleMethod, swizzleMethod2);
    method_exchangeImplementations(originMethod2, swizzleMethod2);
}
@end
</code></pre>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2017/02/13</span>
                    
          				   
                    

                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="2017-01-31%2023%3A57%3A21.html">
                
                  <h1>è§£å†³Charleså’ŒShadowsockså†²çª</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<h2 id="toc_0">é—®é¢˜ï¼š</h2>

<p>ç”±äºæ²¡æœ‰ä¹°iOSä¸Šçš„ç•ª(fan)èŒ„(qiang)Appï¼Œæœ‰çš„æ—¶å€™ç”µè„‘æ‰“å¼€Charlesï¼Œæƒ³èµ°ç”µè„‘çš„Shadow\(socks\)çš„ä»£ç†ï¼Œç™¾åº¦æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œä½†æ˜¯googleå°±èµ°ä¸é€šäº†ã€‚</p>

<h3 id="toc_1">è§£å†³æ–¹æ³•ï¼š</h3>

<h6 id="toc_2">ç¬¬ä¸€æ­¥</h6>

<p><img src="http://upload-images.jianshu.io/upload_images/1300265-5f2d48c4790abbb5.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Paste_Image.png"/></p>

<h6 id="toc_3">ç¬¬äºŒæ­¥</h6>

<p><img src="http://upload-images.jianshu.io/upload_images/1300265-308962058ff45bce.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Paste_Image.png"/></p>

<h2 id="toc_4">ç¯å¢ƒï¼š</h2>

<p>Shadow\(socks\)X v2.6.3<br/>
Charles v4.0</p>

<h6 id="toc_5">æ–‡ç« å‚è€ƒ :</h6>

<p><a href="http://www.wangjiawen.com/skill/shadowsocks-work-with-charles">Charleså’ŒShadow\(socks\)å…±åŒä½¿ç”¨</a></p>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2017/01/31</span>
                    
          				   
                    

                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
              


			<div class="row">
			  <div class="large-6 columns">
			  <p class="text-left" style="padding-top:25px;">
			   <a href="all_1.html">&laquo; Prev Page</a>  
			  </p>
			  </div>
			  <div class="large-6 columns">
			<p class="text-right" style="padding-top:25px;">
			 <a href="all_3.html">&raquo; Next Page</a> 
			</p>
			  </div>
			</div>
		</div>
	</div><!-- large 8 -->

 <div class="large-4 medium-4 columns">
  <div class="hide-for-small">
    <div id="sidebar" class="sidebar">
          <div id="site-info" class="site-info">
            
                <h1>doge1024</h1>
                <div class="site-des">ç½‘ç«™æè¿°</div>
                <div class="social">











  <a target="_blank" class="rss" href="atom.xml" title="RSS">RSS</a>
                
              	 </div>
          	</div>

             

              <div id="site-categories" class="side-item ">
                <div class="side-header">
                  <h2>Categories</h2>
                </div>
                <div class="side-content">

      	<p class="cat-list">
         
        </p>


                </div>
              </div>

              <div id="site-categories" class="side-item">
                <div class="side-header">
                  <h2>Recent Posts</h2>
                </div>
                <div class="side-content">
                <ul class="posts-list">
	      
		      
			      <li class="post">
			        <a href="2020-05-27%2010%3A54%3A36.html">WebStormè°ƒè¯•ReactNative</a>
			      </li>
		     
		  
		      
			      <li class="post">
			        <a href="2020-05-27%2010%3A45%3A10.html">codepushæœåŠ¡å˜æ›´ï¼Œè¿æ¥ä¸ä¸Š</a>
			      </li>
		     
		  
		      
			      <li class="post">
			        <a href="2020-03-28%2014%3A20%3A52.html">å°ç±³æ‰‹æœºå®‰è£…linuxdeployç¢°åˆ°çš„é—®é¢˜</a>
			      </li>
		     
		  
		      
			      <li class="post">
			        <a href="2020-01-19%2001%3A09%3A37.html">macOS 10.15 pip å®‰è£…åº“å¤±è´¥æç¤ºSSL</a>
			      </li>
		     
		  
		      
			      <li class="post">
			        <a href="2019-08-06%2001%3A24%3A23.html">è¯»ã€Šæ—¶é—´ç®€å²ã€‹â€” è§£é‡Šä½ æ— èŠæ—¶çš„é‚£äº›éæƒ³</a>
			      </li>
		     
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		   
		  		</ul>
                </div>
              </div>
        </div><!-- sidebar -->
      </div><!-- hide for small -->
</div><!-- large 4 -->

</div><!-- row -->

 <div class="page-bottom clearfix">
  <div class="row">
   <p class="copyright">Copyright &copy; 2015
Powered by <a target="_blank" href="http://www.mweb.im">MWeb</a>,&nbsp; 
Theme used <a target="_blank" href="http://github.com">GitHub CSS</a>.</p>
  </div>
</div>

        </section>
      </div>
    </div>



  














<style type="text/css">
figure{margin: 0;padding: 0;}
figcaption{text-align:center;}

/* PrismJS 1.14.0
 http://prismjs.com/download.html#themes=prism&languages=markup+css+clike+javascript */
/**
 * prism.js default theme for JavaScript, CSS and HTML
 * Based on dabblet (http://dabblet.com)
 * @author Lea Verou
 */

code[class*="language-"],
pre[class*="language-"] {
    color: black;
    background: none;
    text-shadow: 0 1px white;
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
    text-align: left;
    white-space: pre;
    word-spacing: normal;
    word-break: normal;
    word-wrap: normal;
    line-height: 1.5;
    
    -moz-tab-size: 4;
    -o-tab-size: 4;
    tab-size: 4;
    
    -webkit-hyphens: none;
    -moz-hyphens: none;
    -ms-hyphens: none;
    hyphens: none;
}

pre[class*="language-"]::-moz-selection, pre[class*="language-"] ::-moz-selection,
code[class*="language-"]::-moz-selection, code[class*="language-"] ::-moz-selection {
    text-shadow: none;
    background:#b3d4fc;
}

pre[class*="language-"]::selection, pre[class*="language-"] ::selection,
code[class*="language-"]::selection, code[class*="language-"] ::selection {
    text-shadow: none;
    background: #b3d4fc;
}

@media print {
    code[class*="language-"],
    pre[class*="language-"] {
        text-shadow: none;
    }
}

/* Code blocks */
pre[class*="language-"] {
    padding: 1em;
    margin: .5em 0;
    overflow: auto;
}

:not(pre) > code[class*="language-"],
pre[class*="language-"] {
    background: #F7F7F7;
}

/* Inline code */
:not(pre) > code[class*="language-"] {
    padding: .1em;
    border-radius: .3em;
    white-space: normal;
}

.token.comment,
.token.prolog,
.token.doctype,
.token.cdata {
    color: slategray;
}

.token.punctuation {
    color: #999;
}

.namespace {
    opacity: .7;
}

.token.property,
.token.tag,
.token.boolean,
.token.number,
.token.constant,
.token.symbol,
.token.deleted {
    color: #905;
}

.token.selector,
.token.attr-name,
.token.string,
.token.char,
.token.builtin,
.token.inserted {
    color: #690;
}

.token.operator,
.token.entity,
.token.url,
.language-css .token.string,
.style .token.string {
    color: #9a6e3a;
    background: hsla(0, 0%, 100%, .5);
}

.token.atrule,
.token.attr-value,
.token.keyword {
    color: #07a;
}

.token.function,
.token.class-name {
    color: #DD4A68;
}

.token.regex,
.token.important,
.token.variable {
    color: #e90;
}

.token.important,
.token.bold {
    font-weight: bold;
}
.token.italic {
    font-style: italic;
}

.token.entity {
    cursor: help;
}


pre[class*="language-"].line-numbers {
    position: relative;
    padding-left: 3.8em;
    counter-reset: linenumber;
}

pre[class*="language-"].line-numbers > code {
    position: relative;
    white-space: inherit;
}

.line-numbers .line-numbers-rows {
    position: absolute;
    pointer-events: none;
    top: 0;
    font-size: 100%;
    left: -3.8em;
    width: 3em; /* works for line-numbers below 1000 lines */
    letter-spacing: -1px;
    border-right: 1px solid #999;

    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;

}

    .line-numbers-rows > span {
        pointer-events: none;
        display: block;
        counter-increment: linenumber;
    }

        .line-numbers-rows > span:before {
            content: counter(linenumber);
            color: #999;
            display: block;
            padding-right: 0.8em;
            text-align: right;
        }

</style>

  
    

    <script src="asset/js/foundation.min.js"></script>
    <script>
      $(document).foundation();
      function fixSidebarHeight(){
        var w1 = $('.markdown-body').height();
          var w2 = $('#sidebar').height();
          if (w1 > w2) { $('#sidebar').height(w1); };
      }
      $(function(){
        fixSidebarHeight();
      })
      $(window).load(function(){
          fixSidebarHeight();
      });
     
    </script>



  </body>
</html>
